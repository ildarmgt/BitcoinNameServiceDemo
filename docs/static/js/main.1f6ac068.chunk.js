(this.webpackJsonpbns=this.webpackJsonpbns||[]).push([[0],{127:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){if(void 0!==e&&0!==e.length){if(1===e.length)return e[0];var t=0,n=e.map((function(e){var n={min:t,max:t+e.value,weight:e.value,bid:e};return t+=e.value,n})),a=e[0].blockHash;e.some((function(e){return e.blockHash!==a}))&&console.warn("bidArray should have same height txs but txs contained different block hashes!!!",e);for(var r=BigInt("0x"+a)%BigInt(t),o=0;o<n.length;o++)if(BigInt(n[o].min)<=r&&BigInt(n[o].max)<r)return n[o].bid;console.warn("something went wrong and no winner was found",n,e,t)}}},13:function(e,t,n){e.exports={logo_wrapper:"Wallet_logo_wrapper__2MTPI",logo:"Wallet_logo__1MF_4",logo_selected:"Wallet_logo_selected__FVFkj",interface_not:"Wallet_interface_not__2GDqb",interface:"Wallet_interface__G-UJ_",title:"Wallet_title__1-hmV",feeSelection:"Wallet_feeSelection__Y5L0a",amounts:"Wallet_amounts__1ZUs7",calculatedAmounts:"Wallet_calculatedAmounts__3Yt45",lastError:"Wallet_lastError__3ty5G",buttonWrapper:"Wallet_buttonWrapper__9VSeJ",entries:"Wallet_entries__3RRgo",entries__entry:"Wallet_entries__entry__1xv5-",entries__entry__time:"Wallet_entries__entry__time__3SEYL",entries__entry__button:"Wallet_entries__entry__button__yjy2c",entries__entry__message:"Wallet_entries__entry__message__KpGlp",entries__entry__error:"Wallet_entries__entry__error__1J4by",entries__entry__done:"Wallet_entries__entry__done__k3v84"}},14:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l}));console.warn("Deployment mode");var a=80,r=1e3,o=1e3,i=52560,s=144,c=2,l=1662e3},15:function(e,t,n){e.exports={wrapper:"P5CustomForwards_wrapper__2kAy2",title:"P5CustomForwards_title__29aFH",subtitle:"P5CustomForwards_subtitle__1iqt_",changes:"P5CustomForwards_changes__23bYg",pastList:"P5CustomForwards_pastList__3rXdy",buttonWrapper:"P5CustomForwards_buttonWrapper__3hvwB",editor:"P5CustomForwards_editor__1ZVVF",updateItem:"P5CustomForwards_updateItem__1wAhx",updateCancel:"P5CustomForwards_updateCancel__3b5bW",updateInfo:"P5CustomForwards_updateInfo__2OBcF",editorNetwork:"P5CustomForwards_editorNetwork__1L6UB",editorAddress:"P5CustomForwards_editorAddress__1N25M",btnAdd:"P5CustomForwards_btnAdd__1tiSg",btnDelete:"P5CustomForwards_btnDelete__3NCte",pastPair:"P5CustomForwards_pastPair__3YvIk",pastNetwork:"P5CustomForwards_pastNetwork__35eVe",pastAddress:"P5CustomForwards_pastAddress__3-W_H",bytesLeft:"P5CustomForwards_bytesLeft__2zySr",bytesOver:"P5CustomForwards_bytesOver__ysfMq"}},16:function(e,t,n){e.exports={nav:"Navbar_nav__2imOE",leftCorner:"Navbar_leftCorner__qPPEV",wallet:"Navbar_wallet__1RkTc",pageNum:"Navbar_pageNum__1amUi",api:"Navbar_api__ArjdL",warning:"Navbar_warning__1HOBZ",overflowMenu:"Navbar_overflowMenu__1dStH",button:"Navbar_button__3Xi0T",selected:"Navbar_selected__10Mm9",collapsitron:"Navbar_collapsitron__2qzRt",dots:"Navbar_dots__1OrSM",menuShown:"Navbar_menuShown__3-TaY",blurme:"Navbar_blurme__2nA1q"}},173:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var a=n(10),r=n(8),o=n(71),i=n(14),s=n(49),c=n(19),l=n(4),u=n(64),d=r.crypto.hash160,m=r.opcodes,p=function t(n,p,f,h){var v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(0===n.utxoList.length)throw new Error("Wallet has no funds (utxo) to use");var g=f.feeRate,b=r.networks[h],_=Object(o.a)(p.domainName,h),w=_.notificationsAddress,E=Math.ceil(v*g),k=f.action.suggestions.reduce((function(e,t){var n=[];return"set"in t.info&&"Bid burn amount"===t.info.set.name&&(n=[].concat(Object(a.a)(n),[t.info.set.value])),"get"in t.info&&"Bid burn amount"===t.info.get.name&&(n=[].concat(Object(a.a)(n),[parseInt(t.info.get.value,10)])),[].concat(Object(a.a)(e),Object(a.a)(n))}),[]),x=Math.max.apply(Math,Object(a.a)(k).concat([0])),y=0,S=f.action.suggestions.reduce((function(e,t){if(t.info.type===c.c.REFUND_BIDDERS&&!0===t.info.get.value){var n=t.info.set.value.split("\n").map((function(e){var t=e.split(" ")[1],n=parseInt(e.split(" ")[0],10);return y+=n,{address:t,amount:n}}));return[].concat(Object(a.a)(e),Object(a.a)(n))}return e}),[]),O=y+x+i.f+E,N=0,j=0,A=0,C=[];p.derivedUtxoList.forEach((function(e){e.from_scriptpubkey_address===n.address&&(C.push(e),N+=e.value,A+=e.value)}));var I=[];if(n.utxoList.forEach((function(e){(N<O||0===I.length)&&(I.push(e),N+=e.value,j+=e.value)})),N<O)throw new Error("Not enough funds available (need: "+(O/1e8).toFixed(8)+" BTC, have: "+(N/1e8).toFixed(8)+" BTC)");var B=r.ECPair.fromWIF(n.WIF,b),F=new r.Psbt({network:b});F.setVersion(2),F.setLocktime(0),I.forEach((function(t){F.addInput({hash:t.txid,index:t.vout,sequence:4294967294,nonWitnessUtxo:e.from(t.hex,"hex")})}));var T=r.script.compile([d(e.from(p.domainName,"utf8")),m.OP_DROP]),W=r.script.compile([m.OP_TRUE]);C.forEach((function(t){if(!t.hex)throw new Error("Utxo is missing hex, txid: ".concat(t.txid,", vout:").concat(t.vout));F.addInput({hash:t.txid,index:t.vout,sequence:4294967294,nonWitnessUtxo:e.from(t.hex,"hex"),witnessScript:T})}));var L=Object(l.m)({domain:p},n.address).toString(),P=p.domainName+n.address+L;console.log("nonce used to encrypt",p.domainName,n.address,L);for(var R=e.from(f.embedString),D=e.from([]),H=0;H<f.embedBuffers.length;H++)D=e.concat([D,e.from(f.embedBuffers[H].network),e.from(" "),e.from(f.embedBuffers[H].address),e.from(" ")]);var U=D;U=R.length>0?e.concat([U,R]):U.slice(0,-1);var M=Object(s.c)(U,P);if(console.log("total embedded data is",'"'+U+'", bytes:',U.length),console.log("after encryption embedded data is",'"'+M+'", bytes:',M.length),M.length>80)throw new Error("Embedded data is larger than standardness 80 byte limit rule");var V=r.payments.embed({data:[M]});F.addOutput({script:V.output,value:x}),console.log("rules say to burn ",x),F.addOutput({address:w,value:i.f});var z="CHANGE_ADDRESS"===f.action.type?f.action.suggestions.find((function(e){return"get"in e.info})).info.get.value:n.address,J=N-O;F.addOutput({address:z,value:J}),S.forEach((function(e){F.addOutput({address:e.address,value:e.amount})})),I.forEach((function(e,t){if(F.signInput(t,B),!F.validateSignaturesOfInput(t))throw new Error("Signature validation failed for input index "+t.toString())}));for(var q=0;q<I.length;q++)F.finalizeInput(q);for(var G=I.length;G<I.length+C.length;G++)F.finalizeInput(G,Object(u.b)({inputScript:W,network:b}));var Y=F.extractTransaction();console.log(Y);var K=Y.virtualSize(),Q=Y.getId(),Z=Y.toHex(),X=Y.ins.length,$=Y.outs.length;return v>=K?(console.log("virtualSize",Y.virtualSize()),console.log("byteLength",Y.byteLength()),console.log("getId",Y.getId()),console.log("hex",Y.toHex()),console.log(""),{txid:Q,thisVirtualSize:K,hex:Z,valueNeeded:O,fee:E,change:J,burnAmount:x,notifyAmount:i.f,refundsAmount:y,totalGathered:N,gatheredFromWallet:j,gatheredFromOther:A,nInputs:X,nOutputs:$,nInputsFromWallet:I.length,nInputsFromOther:C.length||0}):t(n,p,f,h,K)}}).call(this,n(3).Buffer)},174:function(e,t,n){"use strict";(function(e){n(11)}).call(this,n(3).Buffer)},189:function(e,t,n){e.exports=n.p+"static/media/graphic.b15c3267.png"},19:function(e,t,n){"use strict";var a,r,o;!function(e){e.RENEW="RENEW",e.ONLY_FORWARDS="ONLY_FORWARDS",e.BID_FOR_OWNERSHIP="BID_FOR_OWNERSHIP",e.SEND_OWNERSHIP="SEND_OWNERSHIP",e.CHANGE_ADDRESS="CHANGE_ADDRESS",e.REFUND_OTHER_BIDS="REFUND_OTHER_BIDS"}(a||(a={})),function(e){e.REFUND_BIDDERS="REFUND_BIDDERS"}(r||(r={})),function(e){e.BURN="BURN",e.NULL="NULL"}(o||(o={})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o}))},193:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(1),r=n(8),o=n(50),i=n.n(o),s=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{if(!t.network)throw new Error('Must provide network ("bitcoin" or "testnet")');var a=r.networks[t.network],o=new r.Psbt({network:a});c({tb:t,psbt:o}),l({tb:t,psbt:o,vBytesMax:n}),t.outputs=JSON.parse(JSON.stringify(t.outputsFixed)),u({tb:t,psbt:o}),d({tb:t,psbt:o});var i=o.extractTransaction(),s=i.virtualSize();return n>=s?(t.result.hex=i.toHex(),t.result.virtualSize=s,t.result.txid=i.getId(),console.log(""),console.log("tx with appropriate size calculated:"),console.log(i),console.log("hex",t.result.hex),console.log("virtualSize",s),console.log("txid",t.result.txid),console.log("actual fee",t.result.fee),console.log("actual fee rate",t.result.fee/t.result.virtualSize),console.log("transaction builder object:",t),console.log(""),t):(console.log("tx draft size ".concat(s," was larger than max of ").concat(n," vbytes, recalculating")),e(t,s))}catch(m){throw console.log("before",t),c({tb:t}),console.log("after",t),m}},c=function(e){var t=e.tb,n=e.psbt;null===n||void 0===n||n.setVersion(t.setVersion),null===n||void 0===n||n.setLocktime(t.setLocktime),t.inputs=JSON.parse(JSON.stringify(t.inputsFixed)),t.outputs=JSON.parse(JSON.stringify(t.outputsFixed)),t.result={hex:"",virtualSize:0,outgoingValue:0,minOutgoingValue:0,changeValue:0,inputsValue:0,availableInputsValue:0,fee:0,txid:""}},l=function t(n){var o,i=n.tb,s=n.psbt,c=n.vBytesMax;i.result.outgoingValue=0,i.result.minOutgoingValue=0,Object.keys(i.outputsFixed).forEach((function(e){if(i.result.minOutgoingValue+=i.outputsFixed[e].minValue,i.result.outgoingValue+=i.outputsFixed[e].value,i.outputsFixed[e].value<=i.minDustValue)throw new Error("Output ".concat(e," value is below dust setting of ").concat(i.minDustValue))}));var l=Math.ceil(c*i.feeRate)+1,u=i.result.outgoingValue+l,d=0,m=[];if(i.result.availableInputsValue=0,null===(o=i.utxoList)||void 0===o||o.forEach((function(e){i.result.availableInputsValue+=e.value,(d<u||0===m.length)&&(m.push(e),d+=e.value)})),i.result.availableInputsValue<i.result.outgoingValue)throw new Error("Not enough overall funds available (need: "+(i.result.outgoingValue/1e8).toFixed(8)+" BTC, have: "+(i.result.availableInputsValue/1e8).toFixed(8)+" BTC)");if(d<u){if(i.result.outgoingValue-l>i.result.minOutgoingValue&&(console.log("Attempting to reduce outputs to get ".concat(l," sats necessary for fee"),i),Object.keys(i.outputsFixed).forEach((function(e){void 0!==i.outputsFixed[e].minValue&&null!==i.outputsFixed[e].minValue||(i.outputsFixed[e].minValue=i.outputsFixed[e].value),console.log(i.outputsFixed[e].value,i.outputsFixed[e].minValue);var t=Math.max(i.outputsFixed[e].value-i.outputsFixed[e].minValue,0),n=Math.min(t,l);l-=n,i.outputsFixed[e].value-=n,console.log(i.outputsFixed[e].value,i.outputsFixed[e].minValue,t,n),console.log("output ".concat(e," value had to be decreased from ").concat(i.outputsFixed[e].value+n," to ").concat(i.outputsFixed[e].value," resulting in ").concat(l," sat more necessary to cover the fee"))})),l<=0))return t({tb:i,psbt:s,vBytesMax:c});throw new Error("Not enough funds available (need: "+(u/1e8).toFixed(8)+" BTC, have: "+(d/1e8).toFixed(8)+" BTC)")}if(i.result.changeValue=d-u,i.result.fee=l,i.result.inputsValue=d,m.forEach((function(t,n){i.inputs[n.toFixed(0)]={hash:t.txid,index:t.vout,sequence:t.sequence,nonWitnessUtxo:e.from(t.hex,"hex"),witnessScript:t.witnessScript,redeemScript:t.redeemScript,inputScript:t.inputScript,keyPairs:t.keyPairs.map((function(e){return r.ECPair.fromWIF(e,r.networks[i.network])})),sighashTypes:t.sighashTypes.map((function(e){return r.Transaction[e]})),canJustSign:t.canJustSign,address:t.address,value:t.value,info:t.info}})),!i.inputs||0===Object.keys(i.inputs).length)throw new Error("Can't have no inputs");console.log("getTx found ".concat(Object.keys(i.inputs).length.toFixed(0)," inputs"));for(var p=0;p<Object.keys(i.inputs).length;p++){if(void 0===i.inputs[p.toFixed(0)])throw new Error("Missing input at vin index ".concat(p.toFixed(0)))}Object.keys(i.inputs).forEach((function(e,t){if(e!==t.toFixed(0))throw new Error("Wrong labeled input with key ".concat(e));var n=i.inputs[e];if(void 0===n.hash)throw new Error("Missing txid on input #".concat(e));if(void 0===n.index)throw new Error("Missing vout on input #".concat(e));if(void 0===n.sequence)throw new Error("Missing sequence on input #".concat(e));if(void 0===n.nonWitnessUtxo)throw new Error("Missing input's full tx hex on input #".concat(e));var o={hash:n.hash,index:n.index,sequence:n.sequence,nonWitnessUtxo:n.nonWitnessUtxo};if(n.witnessScript&&(o.witnessScript=n.witnessScript),n.redeemScript&&(o.redeemScript=n.redeemScript),n.inputScript&&(o.inputScript=r.script.fromASM(o.inputScript).trim().replace(/\s+/g," ")),(n.witnessScript||n.redeemScript)&&!n.inputScript)throw new Error("\n        Missing input script on input #".concat(e," but provided\n        ").concat(n.witnessScript?" witness ":"","\n        ").concat(n.witnessScript&&n.redeemScript?" & ":"","\n        ").concat(n.redeemScript?" redeem ":"","\n        script\n      "));if(!n.witnessScript&&!n.redeemScript&&n.inputScript)throw new Error("Missing witness or redeem scripts but provided input script for input #".concat(e));if(!n.canJustSign&&(!n.inputScript||!n.witnessScript||!n.redeemScript))throw new Error("Can't just sign but no spending scripts either for input #".concat(e));if(n.keyPairs&&(o.keyPairs=n.keyPairs),(!n.keyPairs||!n.keyPairs[0])&&n.canJustSign)throw new Error("Need 1 keypair to just sign input #".concat(e));if(n.sighashTypes&&(o.sighashTypes=n.sighashTypes),n.sighashTypes&&n.keyPairs&&n.sighashTypes.length!==n.keyPairs.length)throw new Error("Each key pair needs matching sighash choice. Missing matches on input #".concat(e));s.addInput(Object(a.a)({},o))}))},u=function(e){var t=e.tb,n=e.psbt;if(!t.outputs||0===Object.keys(t.outputs).length)throw new Error("Can't have no outputs");console.log("getTx found ".concat(Object.keys(t.outputs).length.toFixed(0)," outputs"));for(var r=0;r<Object.keys(t.outputs).length;r++){if(void 0===t.outputs[r.toFixed(0)])throw new Error("Missing output at vout index ".concat(r.toFixed(0)))}if(t.minDustValue<t.result.changeValue){var o=Object.keys(t.outputs).length;t.outputs[o.toFixed(0)]={address:t.changeAddress,value:t.result.changeValue,info:"change"}}Object.keys(t.outputs).forEach((function(e,r){if(e!==r.toFixed(0))throw new Error("Badly labeled output with key ".concat(e));var o=t.outputs[e];if(!o.value)throw new Error("Missing value on output #".concat(e));var i={value:o.value};if(!o.address&&!o.script)throw new Error("Missing address OR script on output #".concat(e));o.address&&(i.address=o.address),o.script&&(i.script=o.script),n.addOutput(Object(a.a)({},o))}))},d=function(e){for(var t=e.tb,n=e.psbt,a=r.networks[t.network],o=Object.keys(t.inputs).length,i=0;i<o;i++){var s=t.inputs[i.toFixed(0)];if(s.canJustSign){if(n.signInput(i,s.keyPairs[0]),!n.validateSignaturesOfInput(i))throw new Error("Signature validation failed for input index "+i.toFixed(0));n.finalizeInput(i)}s.canJustSign||n.finalizeInput(i,m({inputScript:s.inputScript,network:a}))}},m=function(t){var n=t.inputScript,a=t.network;return function(t,o,s,c,l,u){var d={network:a,output:s,input:n};return u&&c&&(d=r.payments.p2wsh({network:a,redeem:d})),l&&(d=r.payments.p2sh({network:a,redeem:d})),{finalScriptSig:d.input,finalScriptWitness:d.witness&&d.witness.length>0?function(t){var n,a=e.allocUnsafe(0);function r(t){var n=a.length,r=i.a.encodingLength(t);a=e.concat([a,e.allocUnsafe(r)]),i.a.encode(t,a,n)}function o(t){r(t.length),function(t){a=e.concat([a,e.from(t)])}(t)}return r((n=t).length),n.forEach(o),a}(d.witness):void 0}}}}).call(this,n(3).Buffer)},194:function(e,t,n){e.exports=n(395)},199:function(e,t,n){},20:function(e,t,n){e.exports={wrapper:"P1RestoreOrBackup_wrapper__32TQJ",title:"P1RestoreOrBackup_title__2rH-6",contentWrapper:"P1RestoreOrBackup_contentWrapper__1NT85",buttonWrapper:"P1RestoreOrBackup_buttonWrapper__2ryAq",describe:"P1RestoreOrBackup_describe__1RMqs",orange:"P1RestoreOrBackup_orange__3V9sL",spacer:"P1RestoreOrBackup_spacer__3luud",backup:"P1RestoreOrBackup_backup__357rd",restoreBackup:"P1RestoreOrBackup_restoreBackup__VUHgs"}},206:function(e,t){},208:function(e,t){},21:function(e,t,n){e.exports={wrapper:"SearchResults_wrapper__VvaYk",scrollbars:"SearchResults_scrollbars__1zMfY",breakable:"SearchResults_breakable__3r3ay",listContainer:"SearchResults_listContainer__12vQE",listItem:"SearchResults_listItem__3Udwx",key:"SearchResults_key__358jo",expired:"SearchResults_expired__2ptnD",avaiability:"SearchResults_avaiability__3E0Yr",createLink:"SearchResults_createLink__13Wez",describe:"SearchResults_describe__3HACm",ownershipDetails:"SearchResults_ownershipDetails__1Z7p1",balance:"SearchResults_balance__11rok",linkable:"SearchResults_linkable__86qQ2",matches:"SearchResults_matches__CzTtF"}},22:function(e,t,n){e.exports={wrapper:"P4ActionChoice_wrapper__2u2J5",title:"P4ActionChoice_title__2PdRs",availableActions:"P4ActionChoice_availableActions__1O5aS",inputForms:"P4ActionChoice_inputForms__3vlaZ",okButton:"P4ActionChoice_okButton__lq4sl",unavailableActions:"P4ActionChoice_unavailableActions__3rEYI",buttonWrapper:"P4ActionChoice_buttonWrapper__3Sx3Y",orange:"P4ActionChoice_orange__6-7sA",unavailableActions__title:"P4ActionChoice_unavailableActions__title__2EQ4_",unavailableActions__actionList:"P4ActionChoice_unavailableActions__actionList__1VAc_",unavailableActions__actionList__action:"P4ActionChoice_unavailableActions__actionList__action__GMwoW",unavailableActions__actionList__action__title:"P4ActionChoice_unavailableActions__actionList__action__title__3ljZU",unavailableActions__actionList__action__permissionList:"P4ActionChoice_unavailableActions__actionList__action__permissionList__2pKeq",unavailableActions__actionList__action__permissionList__permission:"P4ActionChoice_unavailableActions__actionList__action__permissionList__permission__2eF7F",breakable:"P4ActionChoice_breakable__x4Qcm"}},226:function(e,t){},228:function(e,t){},24:function(e,t,n){e.exports={wrapper:"P2LoadWallet_wrapper__vI_bb",title:"P2LoadWallet_title__8Dw43",contentWrapper:"P2LoadWallet_contentWrapper__UNLo4",buttonWrapper:"P2LoadWallet_buttonWrapper__1rrct",button:"P2LoadWallet_button__1A8-S",address:"P2LoadWallet_address__37xx2",orange:"P2LoadWallet_orange__UP8xH",imgQr:"P2LoadWallet_imgQr__3Avh3",backAndReady:"P2LoadWallet_backAndReady__3oVit"}},25:function(e,t,n){e.exports={wrapper:"Withdraw_wrapper__3h_E8",top:"Withdraw_top__WMcMG",top__title:"Withdraw_top__title__2nvNl",contentWrapper:"Withdraw_contentWrapper__3qh1K",from:"Withdraw_from__2QYKc",from__alias:"Withdraw_from__alias__19Znf",from__label:"Withdraw_from__label__2ih7A",from__address:"Withdraw_from__address__27oey",buttonWrapper:"Withdraw_buttonWrapper__3KjA4",total:"Withdraw_total__1JqZ7",total__value:"Withdraw_total__value__27G97",total__units:"Withdraw_total__units__3QTMy",withdraw_control:"Withdraw_withdraw_control__dWjSP"}},26:function(e,t,n){e.exports={wrapper:"P6Broadcast_wrapper__32tq-",title:"P6Broadcast_title__2fzea",fees:"P6Broadcast_fees__STZ2e",txSummary:"P6Broadcast_txSummary__24FzE",status:"P6Broadcast_status__3SsMv",totalCost:"P6Broadcast_totalCost__Agr2T",buttonWrapper:"P6Broadcast_buttonWrapper__ROAk6",status__button:"P6Broadcast_status__button__fFvc3",status__failed:"P6Broadcast_status__failed__1moa8",balance:"P6Broadcast_balance__1ZVur",error:"P6Broadcast_error__1ohCz",notify:"P6Broadcast_notify__3_5vg"}},29:function(e,t,n){e.exports={roundButtonWrap:"RoundButton_roundButtonWrap__2X50a",roundButton:"RoundButton_roundButton__tfjmf",disabledWrap:"RoundButton_disabledWrap__8UNi1",overhead:"RoundButton_overhead__As9JW",nextArrowPad:"RoundButton_nextArrowPad__20zeF",nextArrow:"RoundButton_nextArrow__SS6Nl",backArrowPad:"RoundButton_backArrowPad__3Epn7",backArrow:"RoundButton_backArrow__2MJJm",backWrapper:"RoundButton_backWrapper__3sdTM",minorWrapper:"RoundButton_minorWrapper__3HkhX",minorButton:"RoundButton_minorButton__347lF",disabled:"RoundButton_disabled__1vfKo"}},36:function(e,t,n){e.exports={wrapper:"P3DomainAndWallet_wrapper__1ElFg",contentWrapper:"P3DomainAndWallet_contentWrapper__vm5qp",title:"P3DomainAndWallet_title__3ing2",domainInfo:"P3DomainAndWallet_domainInfo__3p2aJ",domainButton:"P3DomainAndWallet_domainButton__2PIDz",walletInfo:"P3DomainAndWallet_walletInfo__2cQY0",walletButton:"P3DomainAndWallet_walletButton__MmLZ3",unspent:"P3DomainAndWallet_unspent__bUWZW",buttonWrapper:"P3DomainAndWallet_buttonWrapper__djJkL",ownership:"P3DomainAndWallet_ownership__lSY6a",balance:"P3DomainAndWallet_balance__2fns7"}},394:function(e,t,n){},395:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(188),i=n.n(o),s=n(39),c=(n(199),n(52)),l=n(80),u=n.n(l),d=n(189),m=n.n(d),p=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[u.a.wrapper,"scrollbar"].join(" ")},r.a.createElement("div",{className:u.a.title},r.a.createElement("div",null,"Your ",r.a.createElement("span",null,"Bitcoin")," domain \xa0=\xa0"),r.a.createElement("div",null,"\xa0infinite forwarding addresses")),r.a.createElement("div",{className:u.a.contentWrapper},r.a.createElement("img",{className:u.a.drawing,src:m.a,alt:"graphic"}),r.a.createElement("p",null,r.a.createElement("span",null,"Bitcoin")," Domain System (",r.a.createElement("span",null,"BNS"),"): easy to read custom domain names (i.e. aliases) that can store unlimited forwarding information to long alphanumeric btc addresses or any other types of addreses (e.g. ipfs, https, twitter, ...)."),r.a.createElement("p",null,"All ",r.a.createElement("span",null,"BNS")," data is stored inside transactions on the"," ",r.a.createElement("span",null,"Bitcoin")," blockchain. This means that ",r.a.createElement("span",null,"BNS")," is protected by the most secure, decentralized, permissionless, and censorship resistant public network ever created."),r.a.createElement("a",{href:"https://github.com/ildarmgt/BitcoinNameSystem/blob/master/README.md",target:"_blank",rel:"noopener noreferrer"},"more on github"))))};function f(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p,null))}var h,v=n(5),g=n(1),b=n(19);!function(e){e.STORE_SEARCH_RESULTS="STORE_SEARCH_RESULTS",e.STORE_SEARCH_RESULTS_FAIL="STORE_SEARCH_RESULTS_FAIL",e.TYPING="TYPING",e.NEW_WALLET="NEW_WALLET",e.CHANGE_PAGE_INFO="CHANGE_PAGE_INFO",e.UPDATE_WALLET="UPDATE_WALLET",e.UPDATE_DOMAIN="UPDATE_DOMAIN",e.ACTION_FAIL="ACTION_FAIL",e.LOAD_STATE="LOAD_STATE",e.CHOICES_BNS_ACTION="CHOICES_BNS_ACTION",e.SET_API="SET_API"}(h||(h={}));var _=h.STORE_SEARCH_RESULTS_FAIL,w=h.STORE_SEARCH_RESULTS,E=h.TYPING,k=h.NEW_WALLET,x=h.CHANGE_PAGE_INFO,y=h.UPDATE_WALLET,S=h.UPDATE_DOMAIN,O=h.ACTION_FAIL,N=h.LOAD_STATE,j=h.CHOICES_BNS_ACTION,A=h.SET_API;function C(e,t){var n=t.payload;switch(t.type){case A:return Object(g.a)({},e,{api:Object(g.a)({},e.api,{},n)});case j:return Object(g.a)({},e,{choices:Object(g.a)({},e.choices,{},n),lastTimeStamp:Date.now()});case y:return Object(g.a)({},e,{wallet:Object(g.a)({},e.wallet,{txHistory:n.wallet.txHistory,utxoList:n.wallet.utxoList}),pageInfo:Object(g.a)({},e.pageInfo,{checkedWallet:!0}),lastTimeStamp:Date.now()});case S:return Object(g.a)({},e,{domain:Object(g.a)({},n.domain),chain:{height:n.chain.height},pageInfo:Object(g.a)({},e.pageInfo,{checkedDomain:!0}),lastTimeStamp:Date.now()});case x:return Object(g.a)({},e,{pageInfo:Object(g.a)({},e.pageInfo,{current:n})});case k:return Object(g.a)({},e,{wallet:Object(g.a)({},B.wallet,{address:n.address,mnemonic:n.mnemonic,WIF:n.WIF}),pageInfo:Object(g.a)({},e.pageInfo,{checkedWallet:!1}),lastTimeStamp:Date.now()});case w:return Object(g.a)({},e,{alias:n.alias,domain:Object(g.a)({},B.domain,{},n.domain),chain:{height:n.chain.height},pageInfo:Object(g.a)({},e.pageInfo,{checkedDomain:!1,checkedLightSearch:!0}),lastTimeStamp:Date.now()});case _:return Object(g.a)({},e,{alias:n.alias,domain:Object(g.a)({},B.domain,{domainName:n.domainName,notificationAddress:n.notificationAddress}),pageInfo:Object(g.a)({},e.pageInfo,{checkedDomain:!1,checkedLightSearch:!1}),lastTimeStamp:Date.now()});case E:return Object(g.a)({},e,{alias:n,domain:B.domain,pageInfo:Object(g.a)({},e.pageInfo,{current:1,checkedDomain:!1,checkedLightSearch:!1}),lastTimeStamp:Date.now()});case O:return Object(g.a)({},e,{lastTimeStamp:Date.now()});case N:return Object(g.a)({},n,{lastTimeStamp:Date.now()});default:return console.warn("Unknown action type"),e}}var I=n(51),B={network:"testnet",alias:"satoshi",extension:".btc",domain:I.a.domain,wallet:{address:"",mnemonic:"",WIF:"",txHistory:[],utxoList:[]},chain:{height:0},pageInfo:{current:1,checkedDomain:!1,checkedWallet:!1,checkedLightSearch:!1},choices:{action:{},feeRate:1.1,txHex:"",embedString:"",embedBuffers:[]},api:{path:{bitcoin:"https://blockstream.info/api/",testnet:"https://blockstream.info/testnet/api/"},running:!1,tasks:[],rateLimit:4,processId:null},lastTimeStamp:Date.now()},F=r.a.createContext(B);var T=function(e){var t=e.domain.currentOwner;return e.domain.users[t]},W=function(e){return"testnet"===e.network?"tBTC":"BTC"},L=function(e){for(var t=[3,6,12,15,18],n=(e/1e8).toFixed(8).split(""),a=n.length,r=t.length,o=0;o<r;o++){var i=a-t[o];i>0&&n.splice(i,0,"\xa0")}return n.join("")},P=function(e){return(null===e||void 0===e?void 0:e.reduce((function(e,t){return e+t.value}),0))||0},R=n(2),D=n.n(R);function H(e,t){var n;e=String(e),Array.isArray(t)&&(n=t),"string"===typeof t&&(n=[t]);var a="",r=[];n.forEach((function(e){if("numbers"===e&&(a+="0123456789"),"fractions"!==e&&"number"!==e||(a+="0123456789."),"decimal_point"===e&&(a+="."),"hex"===e&&(a+="0123456789abcdefABCDEF"),"lowcaps"===e&&(a+="abcdefghijklmnopqrstuvwxyz"),"highcaps"===e&&(a+="ABCDEFGHIJKLMNOPQRSTUVWYZ"),"spaces"===e&&(a+=" "),"base58"===e&&(a+="12345689ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),"basic"===e&&(a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),"oneline"===e&&(a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ,./-_!`~[]{}|@#%^&()-=?$"),"url"!==e&&"string"!==e||(a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ:/?#[]@!$&'()*+,;=-_.~"),"no_spaces"===e&&r.push((function(e){return e.split("").filter((function(e){return" "!==e})).join("")})),"single_space_width"===e&&r.push((function(e){return e.split(/  */).join(" ")})),"decimal_point"===e&&r.push((function(e){return e.split(".").reduce((function(e,t,n){var a=0===n&&""===t?"0":t;return[e,a].join(1===n?".":"")}),"")})),"no_leading_zeros"===e&&r.push((function(e){return e.split(".").map((function(e,t){return 0===t?(parseInt(e,10)||0).toString():e})).join(".")})),e.startsWith("max_decimal_places")){var t=+e.split(":")[1]||8;r.push((function(e){var n=e.length,a=e.indexOf("."),r=n-a-1;if(-1===a||0===r)return e;if(r>t){var o=r-t;return e.slice(0,-o)}return e}))}})),0===a.length&&0===r.length&&console.warn("sanitize used w/o any known filters",t);var o="";return o=e.split("").filter((function(e){return a.indexOf(e)>-1})).join(""),r.forEach((function(e){return o=e(o)})),o}var U=h.TYPING,M=n(14);var V=n(71),z=n(10),J=n(4),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tx,n=void 0===t?void 0:t;return{status:function(){return Object(J.b)(n)},info:{describe:"Must have 2+ outputs"}}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tx,n=void 0===t?void 0:t;return{status:function(){return Object(J.A)(n)},info:{describe:"Must have OP_RETURN @ output[0]"}}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st,n=e.tx,a=void 0===n?void 0:n;return{status:function(){return Object(J.z)(t,a)},info:{describe:"Must have notification address @ output[1]"}}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tx,n=void 0===t?void 0:t;return{status:function(){return Object(J.g)(n)},info:{describe:"Notification output amount must not be lower than the BNS minimum",set:{value:M.f,name:"Notification minimum",units:"satoshi"}}}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tx,n=void 0===t?void 0:t;return{status:function(){return Object(J.f)(n)},info:{describe:"Must burn (i.e. bid) at least the BNS minimum amount",set:{value:M.e,units:"satoshi",name:"Bid burn amount"}}}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st;return{status:function(){return!Object(J.i)(t)},info:{describe:"There must not be an existing owner"}}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st;return{status:function(){return Object(J.i)(t)},info:{describe:"There must be existing owner"}}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st,n=e.tx,a=void 0===n?void 0:n;return{status:function(){return Object(J.c)(t,a)},info:{describe:"Tx must burn the last ownership winning burn amount",set:{value:Object(J.l)(t),name:"Bid burn amount",units:"satoshi"}}}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st,n=e.address,a=e.tx,r=void 0===a?void 0:a;return{status:function(){return r?Object(J.D)(t,r):Object(J.v)(t,n)},info:{describe:"User's address must match owner's address"}}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st,n=e.address,a=e.tx,r=void 0===a?void 0:a;return{status:function(){return r?Object(J.C)(t,r):Object(J.u)(t,n)},info:{describe:"User's address must match one of bidder's addresses"}}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st;return{status:function(){return Object(J.B)(t)},info:{describe:"Ownership must be expired at current parsed height"}}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st,n=e.tx,a=void 0===n?void 0:n;return{status:function(){return Object(J.E)(t,a)},info:{describe:"There must not be any remaining notification address utxo created by sender"}}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st,n=e.tx,a=void 0===n?void 0:n;return{status:function(){return Object(J.n)(t)!==Object(J.r)(a)},info:{describe:"Do not accidentally send from notification address at input[0]"}}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st,n=e.command,a=e.tx,r=void 0===a?void 0:a;return{status:function(){return Object(J.y)(t,r,n)},info:{describe:"Checks forwards for a specific command issued at this height"}}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st;return{status:function(){return Object(J.w)(t)},info:{describe:"The domain must be undergoing a bidding period"}}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st;return{status:function(){return Object(J.x)(t)},info:{describe:"The bidding period must be over but not resolved"}}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.command;return{status:function(){return!0},info:{describe:"Submit your new address (forwards are kept)",get:{value:"",name:"Your new address"},command:t}}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.command;return{status:function(){return!0},info:{describe:"Submit new owner's address (forwards are not copied)",get:{value:"",name:"New owner's address"},command:t}}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st,n=t?t.domain.bidding.bids.length>0?Math.ceil(Math.max.apply(Math,Object(z.a)(t.domain.bidding.bids.map((function(e){return e.value}))))*M.b):M.e:void 0;return{status:function(){return!0},info:{describe:"Submit your bid burn amount",get:{value:n||0,name:"Bid burn amount",min:n,units:"satoshi"}}}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.st,n=e.address,a=void 0===n?void 0:n,r="Must refund all prior bids for bid to count as valid at the end of the bidding period. Refunds can be done separately or during the bid",o="";if(t){var i=a,s=Object(J.J)(t);for(var c in s)i&&c!==i&&(o+=s[c]+" "+c+"\n");o=o.slice(0,-1)}return""===o?{status:function(){return!0},info:{describe:r}}:{status:function(){return!0},info:{describe:r,type:b.c.REFUND_BIDDERS,get:{value:!0,name:"Refund now?"},set:{value:o,name:"Amount & address to refund",units:"satoshi address"}}}},me=function(e){var t;return{status:function(){return!0},info:{describe:"Action not recommended for non-owners",warning:(null===(t=ee(e))||void 0===t?void 0:t.status())?void 0:"Useless unless you are the owner or will be owner in future"}}},pe=function(e){var t;return{status:function(){return!0},info:{describe:"Action not recommended for non-bidders",warning:(null===(t=te(e))||void 0===t?void 0:t.status())?void 0:"Useless unless you are a bidder or will be bidder in this period later"}}},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a={st:e,tx:n,address:t},r=b.a.REFUND_OTHER_BIDS,o="Refund other bidders for bids to count.",i=[ie,pe],s=[K,ae,re],c=e?function(){console.assert(!!n,"Must not execute action without tx"),Object(J.I)(e,n),console.log("Actions:subtractRefunds:executed",n)}:xe;return{permissions:e?i.map((function(e){return e(a)})):i,conditions:e?s.map((function(e){return e(a)})):s,args:a,info:o,type:r,execute:c}},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a={st:e,tx:n,address:t},r=b.a.BID_FOR_OWNERSHIP,o="Bid for ownership of a domain",i=[Z,ue,de],s=[q,G,Y,K,ae,re,Q],c=e?function(){Object(J.a)(e,n,b.b.BURN),console.log("Actions:bidForOwnershipAction:executed",n)}:xe;return{permissions:e?i.map((function(e){return e(a)})):i,conditions:e?s.map((function(e){return e(a)})):s,args:a,info:o,type:r,execute:c}},ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a="!ca",r={st:e,address:t,tx:n,command:a},o=b.a.CHANGE_ADDRESS,i="Update your ownership address",s=[ee,ce],c=[q,G,Y,K,ae,re,oe],l=e?function(){var t=Object(J.k)(e,n,a),r=null===t||void 0===t?void 0:t.address;if(r){Object(J.j)(e,r)||Object(J.e)(e,r);var o=Object(J.o)(e);Object(J.G)(e,r),Object(J.t)(e,r).winHeight=o.winHeight,Object(J.t)(e,r).winTimestamp=o.winTimestamp,Object(J.t)(e,r).burnAmount=o.burnAmount,Object(J.t)(e,r).forwards=JSON.parse(JSON.stringify(o.forwards)),o.winHeight=0,o.winTimestamp=0,o.burnAmount=0,console.log("ownership transfered from",o.address,"to",r)}else console.log("ownership transfer detected, but no address found")}:xe;return{permissions:e?s.map((function(e){return e(r)})):s,conditions:e?c.map((function(e){return e(r)})):c,args:r,info:i,type:o,execute:l}},ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a="!so",r={st:e,address:t,tx:n,command:a},o=b.a.SEND_OWNERSHIP,i="Give up ownership to another address",s=[ee,le],c=[q,G,Y,K,ae,re,oe],l=e?function(){var t=Object(J.k)(e,n,a),r=null===t||void 0===t?void 0:t.address;if(r){Object(J.j)(e,r)||Object(J.e)(e,r);var o=Object(J.o)(e);Object(J.G)(e,r),Object(J.t)(e,r).winHeight=o.winHeight,Object(J.t)(e,r).winTimestamp=o.winTimestamp,Object(J.t)(e,r).burnAmount=o.burnAmount,o.winHeight=0,o.winTimestamp=0,o.burnAmount=0,console.log("ownership transfered from",o.address,"to",r)}else console.log("ownership transfer detected, but no address found")}:xe;return{permissions:e?s.map((function(e){return e(r)})):s,conditions:e?c.map((function(e){return e(r)})):c,args:r,info:i,type:o,execute:l}},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a={st:e,address:t,tx:n},r=b.a.RENEW,o="Extend ownership of this domain",i=[ee],s=[q,G,Y,K,ae,re,Q,$],c=e?function(){var t=Object(J.o)(e);t&&(t.winHeight=Object(J.q)(n)),t&&(t.winTimestamp=Object(J.s)(n)),console.log("".concat(e.domain.domainName," : ").concat(Object(J.q)(n)," height: owner extended ownership ").concat(null===t||void 0===t?void 0:t.address))}:xe;return{permissions:e?i.map((function(e){return e(a)})):i,conditions:e?s.map((function(e){return e(a)})):s,args:a,info:o,type:r,execute:c}},_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a={st:e,address:t,tx:n},r=b.a.ONLY_FORWARDS,o="Only update forwarding information",i=[me],s=[q,G,Y,K,ae,re],c=e?function(){Object(J.F)(e,n)}:xe;return{permissions:e?i.map((function(e){return e(a)})):i,conditions:e?s.map((function(e){return e(a)})):s,args:a,info:o,type:r,execute:c}},we=function(e){var t={st:e};return{info:"Existing ownerships that expire are removed",conditions:[X(t),ne(t)],execute:function(){Object(J.d)(e),console.log(e.domain.domainName,Object(J.p)(e),"ownership expired")}}},Ee=function(e,t){return{info:"Update derivedUtxoList from new tx",conditions:[],execute:function(){Object(J.M)(e,t)}}},ke=function(e){var t={st:e};return{info:"Derive the new owner from bidding period",conditions:[Z(t),se(t)],execute:function(){Object(J.h)(e),console.log("autoCheckForBiddingWinnerNewOwnerAction(): Bidding period has ended")}}},xe=function(){},ye=function(e,t){[we(e),t?Ee(e,t):void 0,ke(e)].forEach((function(e){e&&(e.conditions.reduce((function(e,t){return e&&t.status()}),!0)&&e.execute())}))},Se=function(e,t,n,a){var r,o=JSON.parse(JSON.stringify(I.a));return o.domain.domainName=t,o.chain&&(o.chain.currentHeight=n),o.domain.notificationAddress=(null===(r=Object(V.a)(t,a))||void 0===r?void 0:r.notificationsAddress)||"",o.domain.txHistory=e.slice().reverse().filter((function(e){return Object(J.q)(e)>=M.d})).sort((function(e,t){return e.status.block_height-t.status.block_height})),o.domain.txHistory.forEach((function(e){Object(J.H)(o,Object(J.q)(e)),Object(J.L)(o,e),ye(o,e),function(e,t){[_e(e,void 0,t),be(e,void 0,t),he(e,void 0,t),fe(e,void 0,t),ge(e,void 0,t),ve(e,void 0,t)].forEach((function(e){var t=e.conditions.reduce((function(e,t){return e&&t.status()}),!0),n=e.permissions.reduce((function(e,t){return e&&t.status()}),!0);t&&n&&e.execute()}))}(o,e),Object(J.L)(o,e),Object(J.K)(o)})),Object(J.H)(o,n),ye(o,void 0),o},Oe=function(e){var t=Object(z.a)(e).sort((function(e,t){return e.updateHeight-t.updateHeight})),n={};return t.forEach((function(e){var t=!e.network.startsWith("!"),a=!(""===e.network);t&&a&&(n[e.network]=e),""===e.address&&delete n[e.network]})),Object(z.a)(Object.values(n))},Ne=function(e){if(void 0===e||null===e)return je;var t=Object(J.o)(e);if(!t||!t.forwards)return je;var n=Oe(t.forwards);return{length:n.length,toForwards:n,toSpaceSeparated:n.map((function(e){return"".concat(e.network," ").concat(e.address)}))}},je={length:0,toForwards:[],toSpaceSeparated:[]},Ae=function(e,t){for(var n,a=[_e(null),be(null),he(null),fe(null),ge(null),ve(null)],r=0;r<a.length;r++)if(e.startsWith(a[r].args.command)){n=a[r];break}if(n){for(var o,i=0;i<n.permissions.length;i++)if("get"in n.permissions[i]().info){console.log(n.permissions[i]()),o=n.permissions[i]().info.get.name;break}if(o)return{info:n.info,getterName:o,value:t}}},Ce=n(49),Ie=function(e){return Object(Ce.b)(e,"arbitrary key and iv seeding string").length},Be=n(173),Fe=function(e){return e.suggestions.filter((function(e){return"set"in e.info}))||[]},Te=(n(174),n(8)),We=n(72),Le=n.n(We),Pe=n(35),Re=n.n(Pe),De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bitcoin",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=Te.networks[t],r=Le.a.mnemonicToSeed(e),o=Te.bip32.fromSeed(r,a),i=o.derivePath("m/1001'/0'/".concat(n,"'")),s=i.neutered(),c=s.toBase58(),l=Re.a.decode(c);return console.log("xpub bytes:",l.length),l},He=n(66),Ue=n.n(He);function Me(e,t){var n,a;return D.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t[e]+"fee-estimates",console.warn(n),r.prev=2,r.next=5,D.a.awrap(Ue.a.get(n));case 5:return a=r.sent,console.warn("Blockstream.info API getFeeEstimates",a.data),r.abrupt("return",a.data);case 10:throw r.prev=10,r.t0=r.catch(2),console.warn(r.t0),new Error("Blockstream.info API getFeeEstimates failed");case 14:case"end":return r.stop()}}),null,null,[[2,10]])}function Ve(e,t){var n,a;return D.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t[e]+"blocks/tip/height",console.warn(n),r.prev=2,r.next=5,D.a.awrap(Ue.a.get(n));case 5:return a=r.sent,console.warn("Blockstream.info API getHeight",a.data),r.abrupt("return",a.data);case 10:throw r.prev=10,r.t0=r.catch(2),console.warn(r.t0),new Error("Blockstream.info API height get failed");case 14:case"end":return r.stop()}}),null,null,[[2,10]])}function ze(e,t,n){var a,r,o,i,s,c,l,u,d,m,p,f,h,g=arguments;return D.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(a=g.length>3&&void 0!==g[3]?g[3]:Ke,void 0!==e){b.next=3;break}throw new Error("undefined utxoList when addRawTxToArray was called");case 3:if(r="",0!==(null===e||void 0===e?void 0:e.length)){b.next=6;break}return b.abrupt("return",{utxoList:e,error:"no utxo"});case 6:o=0,i=Object.entries(e);case 7:if(!(o<i.length)){b.next=38;break}s=i[o],c=Object(v.a)(s,2),l=c[0],u=c[1],d=parseInt(l,10),m=2;case 14:if(!(m-- >0)){b.next=35;break}return b.prev=15,p=u.txid,f=n[t]+"tx/"+p+"/hex",console.warn(f),b.next=21,D.a.awrap(Ue.a.get(f));case 21:return h=b.sent,console.warn("Blockstream.info API addRawTxToArray:",d,"index utxo has raw hex of",h.data),e[d].hex=h.data,b.abrupt("break",35);case 27:b.prev=27,b.t0=b.catch(15),console.warn("fail detected",l,u,m,r,b.t0),r+=l+" ";case 31:return b.next=33,D.a.awrap(a());case 33:b.next=14;break;case 35:o++,b.next=7;break;case 38:return b.abrupt("return",{utxoList:e,erroredOutputs:r});case 39:case"end":return b.stop()}}),null,null,[[15,27]])}function Je(e,t,n){var a,r;return D.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0!==e&&""!==e){o.next=2;break}throw new Error("no address when getUTXOList called");case 2:return a=n[t]+"address/"+e+"/utxo",console.warn(a),o.prev=4,o.next=7,D.a.awrap(Ue.a.get(a));case 7:return r=o.sent,console.warn("Blockstream.info API getUTXOList",r.data),o.abrupt("return",r.data.filter((function(e){return e.status.confirmed})));case 12:throw o.prev=12,o.t0=o.catch(4),console.warn(o.t0),new Error("Blockstream.info API access failed");case 16:case"end":return o.stop()}}),null,null,[[4,12]])}function qe(e,t,n){var a,r,o,i,s;return D.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==e&&""!==e){c.next=2;break}throw new Error("no address when getAddressHistory called");case 2:a=25,r="",o=[],"/txs/chain/",i=n[t]+"address/"+e+"/txs/chain/",console.warn(i),c.prev=8;case 9:return c.next=11,D.a.awrap(Ue.a.get(i+r));case 11:if(s=c.sent,console.warn("blockstream.info API getAddressHistory",i+r,"\n",s.data),o.push.apply(o,Object(z.a)(s.data)),!(s.data.length>=a)){c.next=21;break}return r=s.data.slice(-1)[0].txid,console.log("Multiple pages of tx detected, lastTxid received is",r),c.next=19,D.a.awrap(Ke());case 19:c.next=22;break;case 21:r="";case 22:if(""!==r){c.next=9;break}case 23:return c.abrupt("return",o);case 26:throw c.prev=26,c.t0=c.catch(8),console.warn(c.t0),new Error("Blockstream.info API access failed");case 30:case"end":return c.stop()}}),null,null,[[8,26]])}function Ge(e,t,n){var a,r;return D.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0!==e&&""!==e){o.next=2;break}throw new Error("no content when txPush called");case 2:return a=n[t]+"broadcast",o.prev=3,o.next=6,D.a.awrap(Ue.a.get(a,{params:{tx:e}}));case 6:return r=o.sent,console.warn("blockstream.info API txPush",r," Broadcasted on",t),o.abrupt("return",{txid:r.data});case 11:throw o.prev=11,o.t0=o.catch(3),console.warn("Failed pushtx",t,o.t0.response.data),new Error("Blockstream.info API access failed\n"+o.t0.response.data);case 15:case"end":return o.stop()}}),null,null,[[3,11]])}var Ye,Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;return new Promise((function(t){return setTimeout(t,e)}))},Qe=h.SET_API,Ze=function(e,t,n){return D.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,r){var o={run:n,resolve:a,reject:r,timestamp:Date.now()},i=Object(g.a)({},e.api,{tasks:[].concat(Object(z.a)(e.api.tasks),[o])});t({type:Qe,payload:i})})));case 1:case"end":return a.stop()}}))},Xe=h.STORE_SEARCH_RESULTS_FAIL,$e=h.STORE_SEARCH_RESULTS,et=function(e,t){var n,a,r,o,i,s,c,l,u,d,m=arguments;return D.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(n=m.length>2&&void 0!==m[2]?m[2]:{otherDomain:""},a=n.otherDomain,e.alias||a){p.next=4;break}return console.log("no alias/domain found"),p.abrupt("return",void 0);case 4:return r=a||e.alias+e.extension,o=e.api.path,i=Object(V.a)(r,e.network),s=i.notificationsAddress,p.prev=7,p.next=10,D.a.awrap(Ze(e,t,(function(){return Ve(e.network,o)})));case 10:return c=p.sent,p.next=13,D.a.awrap(Ze(e,t,(function(){return qe(s,e.network,o)})));case 13:return l=p.sent,u=Se(l,r,c,e.network),d=u.domain,a||t({type:$e,payload:{alias:e.alias,domain:d,chain:{height:c}}}),p.abrupt("return",{domain:d,chain:{height:c}});case 19:return p.prev=19,p.t0=p.catch(7),console.log("searchAction issue found:",p.t0),a||t({type:Xe,payload:{alias:e.alias,domainName:r,notificationsAddress:s}}),p.abrupt("return",null);case 24:case"end":return p.stop()}}),null,null,[[7,19]])},tt=n(64),nt=h.NEW_WALLET,at=function(e,t){var n,a,r,o,i,s=arguments;return D.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:"",a=""===n?Object(tt.a)(e.network):Object(tt.d)(n,e.network),r=a.mnemonic,o=a.WIF,i=a.address,c.abrupt("return",t({type:nt,payload:{mnemonic:r,WIF:o,address:i}}));case 3:case"end":return c.stop()}}))},rt=h.CHANGE_PAGE_INFO,ot=function(e,t,n){return D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:rt,payload:n}));case 1:case"end":return e.stop()}}))},it=h.UPDATE_WALLET,st=h.UPDATE_DOMAIN,ct=h.ACTION_FAIL,lt=function(e,t,n){var a,r,o,i,s,c,l,u,d,m,p,f,h,v,g;return D.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(a=e.alias+e.extension,n!==it){b.next=24;break}return b.prev=2,r=e.wallet.address,b.next=6,D.a.awrap(Ze(e,t,(function(){return qe(r,e.network,e.api.path)})));case 6:return o=b.sent,b.next=9,D.a.awrap(Ze(e,t,(function(){return Je(r,e.network,e.api.path)})));case 9:return i=b.sent,b.next=12,D.a.awrap(Ze(e,t,(function(t){var n=t.delay;return ze(i,e.network,e.api.path,n)})));case 12:return s=b.sent,c=s.utxoList,(l=s.erroredOutputs)&&console.log("API had issues during hex utxo scan:",l),b.abrupt("return",t({type:it,payload:{wallet:{txHistory:o,utxoList:c}}}));case 19:return b.prev=19,b.t0=b.catch(2),console.log("Wallet address scan failed"),console.log(b.t0),b.abrupt("return",t({type:ct,payload:{}}));case 24:if(n!==st){b.next=47;break}return b.prev=25,b.next=28,D.a.awrap(Ze(e,t,(function(){return Ve(e.network,e.api.path)})));case 28:return u=b.sent,d=Object(V.a)(a,e.network),m=d.notificationsAddress,b.next=32,D.a.awrap(Ze(e,t,(function(){return qe(m,e.network,e.api.path)})));case 32:return p=b.sent,f=Se(p,a,u,e.network),h=f.domain,b.next=36,D.a.awrap(Ze(e,t,(function(t){var n=t.delay;return ze(h.derivedUtxoList,e.network,e.api.path,n)})));case 36:return v=b.sent,(g=v.erroredOutputs)&&console.log("API had issues during hex utxo scan:",g),b.abrupt("return",t({type:st,payload:{domain:h,chain:{height:u}}}));case 42:return b.prev=42,b.t1=b.catch(25),console.log("Notification address scan failed"),console.log(b.t1),b.abrupt("return",t({type:ct,payload:{}}));case 47:throw new Error("unexpected address type");case 48:case"end":return b.stop()}}),null,null,[[2,19],[25,42]])},ut=h.CHOICES_BNS_ACTION,dt=function(e,t,n){return D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:ut,payload:n}));case 1:case"end":return e.stop()}}))},mt=h.SET_API,pt=function(e,t,n){return D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:mt,payload:n}));case 1:case"end":return e.stop()}}))},ft=n(53),ht=n.n(ft),vt=function(){var e=r.a.useContext(F).state,t=e.alias+e.extension,n=Object(c.g)(),o=Object(a.useState)(window.innerWidth),i=Object(v.a)(o,2),s=i[0],l=i[1];Object(a.useEffect)((function(){var e=function(){l(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var u=Math.min(Math.floor(1.1*s/t.length),Math.floor(1.1*s/15)),d={height:(.13*s+.4*u).toString()+"px"},m={marginTop:(.02*s-.1*u).toString()+"px"},p={fontSize:u.toString()+"px"};return r.a.createElement("div",{className:ht.a.wrapper},r.a.createElement("div",{className:ht.a.cutOverflow,style:d},r.a.createElement("div",{className:ht.a.bar,style:d})),r.a.createElement("div",{className:ht.a.domain,style:m,onClick:function(){n.push("/")}},r.a.createElement("span",{className:ht.a.alias,style:p},e.alias),r.a.createElement("span",{className:ht.a.ext,style:p},e.extension)),r.a.createElement("div",{className:ht.a.spacer}))},gt=n(29),bt=n.n(gt),_t=function(e){return r.a.createElement("div",Object.assign({style:{display:"false"===(null===e||void 0===e?void 0:e.show)?"none":"inline-block","--colorThisButton":e.colorbutton?e.colorbutton:"var(--colorBitcoinOrange)","--colorThisButtonText":e.colorbuttontext?e.colorbuttontext:"var(--colorButtonText)","--sizeButton":e.sizebutton?"calc(".concat(e.sizebutton,"/2.9 * var(--s))"):"calc(2.5/2.9 * var(--s))"}},e,{className:[bt.a.roundButtonWrap,e.back?bt.a.backWrapper:"",e.minor?bt.a.minorWrapper:void 0,e.showdisabled?bt.a.disabledWrap:void 0,e.className].join(" "),onClick:function(t){e.showdisabled||e.onClick(t)}}),r.a.createElement("div",{className:[bt.a.roundButton,e.back?bt.a.backArrowPad:void 0,e.next?bt.a.nextArrowPad:void 0,e.minor?bt.a.minorButton:void 0,e.showdisabled?bt.a.disabled:void 0].join(" ")},e.back&&r.a.createElement("div",{className:bt.a.backArrow}),e.children,e.next&&r.a.createElement("div",{className:bt.a.nextArrow}),r.a.createElement("div",{className:bt.a.overhead})))},wt=n(20),Et=n.n(wt),kt=n(67),xt=n.n(kt),yt=function(e){var t=r.a.useState("true"===(null===e||void 0===e?void 0:e.show)||!1),n=Object(v.a)(t,2),a=n[0],o=n[1];return r.a.createElement("div",{className:xt.a.wrapper},r.a.createElement("div",{className:xt.a.buttonWrapper,onClick:function(){o(!a)}},r.a.createElement("div",{className:xt.a.toggleDetails},e.title||e.description||"Show details"),r.a.createElement("div",{className:[xt.a.arrow,a?xt.a.down:""].join(" ")})),r.a.createElement("div",{className:xt.a.details,style:{display:a?"block":"none"}},e.children))};!function(e){e[e.ROOT=0]="ROOT",e[e.NEW_WALLET=1]="NEW_WALLET",e[e.LOAD_BACKUP=2]="LOAD_BACKUP"}(Ye||(Ye={}));var St=function(){var e,t=r.a.useContext(F),n=t.state,o=t.dispatch,i=Object(a.useState)(Ye.ROOT),s=Object(v.a)(i,2),c=s[0],l=s[1],u=Object(a.useState)(""),d=Object(v.a)(u,2),m=d[0],p=d[1],f=m.split(" ").filter((function(e){return""!==e})).length;return r.a.createElement("div",{className:Et.a.wrapper},r.a.createElement("div",{style:{display:c===Ye.ROOT?"block":"none"}},r.a.createElement("div",{className:Et.a.title},n.wallet.address?r.a.createElement(r.a.Fragment,null,"Your ",r.a.createElement("span",{className:Et.a.orange},"BTC")," wallet for interacting",r.a.createElement("br",null),"with the domains"):r.a.createElement(r.a.Fragment,null,"Need a ",r.a.createElement("span",{className:Et.a.orange},"BTC")," wallet for interacting",r.a.createElement("br",null),"with the domains")),r.a.createElement("div",{className:Et.a.contentWrapper},r.a.createElement(yt,{description:"Explain"},r.a.createElement("p",null,r.a.createElement("span",null,"This wallet has the built-in unique functionality to create transactions with custom scripts, inputs, and outputs necessary for this application."),r.a.createElement("span",null,"The wallet's address is how users and owners of the domains are identified and should only be used for this purpose."),r.a.createElement("span",null,"1. BIP39 mnemonic is used from backup or generated"),r.a.createElement("span",null,"2. BIP32 master seed is derived from the mnemonic"),r.a.createElement("span",null,"3. Key pair is derived at the m/44'/0'/0'/0/0 path from master seed"),r.a.createElement("span",null,"4. The p2wpkh (pay-to-witness-public-key-hash) address is derived from key pair")))),r.a.createElement("div",{className:Et.a.buttonWrapper},r.a.createElement(_t,{show:n.wallet.mnemonic.length>0?"false":"true",onClick:function(){l(Ye.NEW_WALLET),at(n,o)}},"I need a new wallet"),r.a.createElement(_t,{show:n.wallet.mnemonic.length>0?"true":"false",onClick:function(){l(Ye.NEW_WALLET)}},"Current mnemonic"),r.a.createElement(_t,{onClick:function(){l(Ye.LOAD_BACKUP)}},"Restore from backup"),r.a.createElement(_t,{show:(!!(null===(e=n.wallet)||void 0===e?void 0:e.address)).toString(),onClick:function(){ot(0,o,2)},next:"true"},"Don't change wallet"))),r.a.createElement("div",{className:Et.a.title,style:{display:c===Ye.NEW_WALLET?"inline-block":"none"}},"Randomly generated mnemonic backup for"," ",r.a.createElement("span",{className:Et.a.orange},"BTC")," wallet"),r.a.createElement("div",{className:Et.a.contentWrapper,style:{display:c===Ye.NEW_WALLET?"flex":"none"}},r.a.createElement("div",{className:Et.a.describe},"Backup this private phrase or you will lose access!"),r.a.createElement("div",{id:"divBackup",spellCheck:!1,className:[Et.a.backup,"selectable"].join(" "),onClick:function(){}},n.wallet.mnemonic)),r.a.createElement("div",{className:Et.a.buttonWrapper,style:{display:c===Ye.NEW_WALLET?"flex":"none"}},r.a.createElement(_t,{onClick:function(){l(Ye.ROOT)},back:"true"},"Back"),r.a.createElement(_t,{onClick:function(){l(Ye.NEW_WALLET),at(n,o)}},"New"),r.a.createElement(_t,{next:"true",onClick:function(){ot(0,o,2)}},"I'm done with backup")),r.a.createElement("div",{style:{display:c===Ye.LOAD_BACKUP?"block":"none"}},r.a.createElement("div",{className:Et.a.title},"Type or paste your backup here"),r.a.createElement("div",{className:Et.a.contentWrapper},f.toString()+" words now. 12 minimum."),r.a.createElement("textarea",{className:Et.a.restoreBackup,cols:30,rows:3,spellCheck:!1,placeholder:"mnemonic backup",onChange:function(e){var t=H(e.target.value.toLowerCase(),"lowcaps spaces single_space_width".split(" ")).trimLeft();p(t.trim()),e.target.value=t}}),r.a.createElement("div",{className:Et.a.buttonWrapper},r.a.createElement(_t,{onClick:function(){l(Ye.ROOT)},back:"true"},"Back"),r.a.createElement(_t,{show:f>=12?"true":"false",next:"true",onClick:function(){at(n,o,m),ot(0,o,2)}},"Done"))))},Ot=n(24),Nt=n.n(Ot),jt=n(192),At=n.n(jt),Ct=function(){var e,t=r.a.useContext(F),n=t.state,o=t.dispatch,i=Object(a.useState)(),s=Object(v.a)(i,2),l=s[0],u=s[1];Object(a.useEffect)((function(){At.a.toDataURL(n.wallet.address,{type:"image/jpeg",color:{dark:"#111133ff"}},(function(e,t){e||u(t)}))}),[n.wallet.address]);var d=Object(c.g)();return r.a.createElement("div",{className:Nt.a.wrapper},r.a.createElement("div",{className:Nt.a.title},"Fund your ",r.a.createElement("span",{className:Nt.a.orange},"BTC")," wallet to interact with domains"),r.a.createElement("div",{className:Nt.a.contentWrapper},r.a.createElement("div",{className:Nt.a.imgQr},r.a.createElement("img",{src:l,alt:"QR Code"})),r.a.createElement("div",{className:[Nt.a.address,"selectable"].join(" ")},n.wallet.address)),r.a.createElement("div",{className:Nt.a.buttonWrapper},r.a.createElement("div",{className:Nt.a.backAndReady},r.a.createElement(_t,{className:Nt.a.button,back:"true",onClick:function(){ot(0,o,1)}},"Back"),r.a.createElement(_t,{className:Nt.a.button,next:"true",onClick:function(){ot(0,o,3)}},"Ready")),r.a.createElement(_t,{className:Nt.a.button,show:(!!(null===(e=n.wallet)||void 0===e?void 0:e.address)).toString(),onClick:function(){d.push("/wallet")},colorbutton:"var(--colorHighlightDark)"},"Withdraw"),r.a.createElement(_t,{className:Nt.a.button,colorbutton:"var(--colorHighlightDark)",show:("testnet"===n.network).toString(),onClick:function(){window.open("https://bitcoinfaucet.uo1.net/","_blank")}},"Testnet faucet #1"),r.a.createElement(_t,{className:Nt.a.button,colorbutton:"var(--colorHighlightDark)",show:("testnet"===n.network).toString(),onClick:function(){window.open("https://testnet-faucet.mempool.co/","_blank")}},"Testnet faucet #2"),r.a.createElement(_t,{className:Nt.a.button,colorbutton:"var(--colorHighlightDark)",onClick:function(){var e="testnet"===n.network?"testnet/":"";window.open("https://blockstream.info/".concat(e,"address/").concat(n.wallet.address),"_blank")}},"Open explorer")))},It=n(36),Bt=n.n(It),Ft=function(){var e=r.a.useContext(F),t=e.state,n=e.dispatch,a=r.a.useState(!1),o=Object(v.a)(a,2),i=o[0],s=o[1],c=r.a.useState("ok"),l=Object(v.a)(c,2),u=l[0],d=l[1];r.a.useEffect((function(){d("ok")}),[t.lastTimeStamp]);var m=function(){return t.pageInfo.checkedDomain||t.pageInfo.checkedWallet?!t.pageInfo.checkedDomain&&t.pageInfo.checkedWallet?{isReady:!1,info:"Scan domain to move on"}:t.pageInfo.checkedDomain&&!t.pageInfo.checkedWallet?{isReady:!1,info:"Scan wallet to move on"}:t.pageInfo.checkedDomain&&t.pageInfo.checkedWallet?{isReady:!0,info:""}:{isReady:!1,info:"Unknown status"}:{isReady:!1,info:"Scan both to move on"}};if(!i){s(!0);D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pageInfo.checkedDomain){e.next=4;break}return d("domain"),e.next=4,D.a.awrap(lt(t,n,h.UPDATE_DOMAIN));case 4:if(t.pageInfo.checkedWallet){e.next=8;break}return d("wallet"),e.next=8,D.a.awrap(lt(t,n,h.UPDATE_WALLET));case 8:case"end":return e.stop()}}))}return r.a.createElement("div",{className:Bt.a.wrapper},r.a.createElement("div",{className:Bt.a.title},"Must scan the domain and owner addresses"),r.a.createElement("div",{className:Bt.a.domainInfo},"domain"!==u&&"Domain "+(t.pageInfo.checkedDomain?"\u2713":"needs scan"),"domain"===u&&"Domain scanning..."),r.a.createElement("div",{className:Bt.a.domainButton},r.a.createElement(_t,{onClick:function(){"ok"===u&&(d("domain"),lt(t,n,h.UPDATE_DOMAIN))},minor:"true"},"API Scan")),r.a.createElement("div",{className:Bt.a.walletInfo},"wallet"!==u&&"Wallet "+(t.pageInfo.checkedWallet?"\u2713":"needs scan"),"wallet"===u&&"Wallet scanning..."),r.a.createElement("div",{className:Bt.a.walletButton},r.a.createElement(_t,{onClick:function(){"ok"===u&&(d("wallet"),lt(t,n,h.UPDATE_WALLET))},minor:"true"},"API Scan")),r.a.createElement("div",{className:Bt.a.unspent},r.a.createElement("div",{className:Bt.a.balance},t.pageInfo.checkedWallet?L(P(t.wallet.utxoList)):"n/a")," "+W(t)),r.a.createElement("div",{className:Bt.a.ownership},m().info),r.a.createElement("div",{className:Bt.a.buttonWrapper},r.a.createElement(_t,{back:"true",onClick:function(){ot(0,n,2)}},"Back"),r.a.createElement(_t,{show:m().isReady?"true":"false",next:"true",onClick:function(){ot(0,n,4)}},"Ready")))},Tt=n(23),Wt=n(22),Lt=n.n(Wt),Pt=n(41),Rt=n.n(Pt),Dt=function(e){var t=r.a.useState(void 0!==e.thisInitialValue?e.thisInitialValue:""),n=Object(v.a)(t,2),a=n[0],o=n[1],i=r.a.useState({lastTimer:null,known:{}}),s=Object(v.a)(i,2),c=s[0],l=s[1],u=r.a.useState(!1),d=Object(v.a)(u,2),m=d[0],p=d[1],f=function(t){var n=H(t.target.value,e.sanitizeFilters||["oneline"]);if(o(n),t.target.value=n,e.thisInputOnChange&&e.thisInputOnChange(t),e.getDropdowns){clearTimeout(c.lastTimer);var a=setTimeout((function(){var t;return D.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(c.known[n]){a.next=8;break}return a.next=3,D.a.awrap(e.getDropdowns(n));case 3:if(a.t0=a.sent,a.t0){a.next=6;break}a.t0=[];case 6:(t=a.t0).length&&l(Object(g.a)({},c,{known:Object(g.a)({},c.known,Object(Tt.a)({},n,t))}));case 8:case"end":return a.stop()}}))}),1e3);l(Object(g.a)({},c,{lastTimer:a}))}};return r.a.createElement("div",{className:[Rt.a.wrapper,e.className].join(" "),style:e.style},r.a.createElement("div",{className:Rt.a.shiftRight},r.a.createElement("aside",{className:Rt.a.label},e.thisInputLabel||""),r.a.createElement("textarea",{onFocus:function(){return setTimeout((function(){return D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0);case 1:case"end":return e.stop()}}))}),250)},onBlur:function(){return setTimeout((function(){return D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:p(!1);case 1:case"end":return e.stop()}}))}),250)},className:Rt.a.textarea,wrap:"off",spellCheck:!1,value:a,onChange:f,placeholder:e.placeholder||""}),e.getDropdowns&&e.renderDropdowns&&m&&c.known[a]&&r.a.createElement("div",{className:[Rt.a.suggestions,"scrollbar"].join(" ")},(c.known[a]||[]).map((function(t,n){var i=null===e||void 0===e?void 0:e.renderDropdowns({textValue:a,item:t});return i?r.a.createElement("div",{key:"suggestion_dropdown_".concat(n)},r.a.createElement("div",{className:[Rt.a.suggestions__item,"letter_breakable"].join(" "),onClick:function(){return e=i.selection,o(e),void f({target:{value:e}});var e}},i.contents),r.a.createElement("div",{className:Rt.a.suggestions__separator})):void 0}))),"true"===e.showButton&&r.a.createElement(_t,{className:[Rt.a.button].join(" "),next:"true",onClick:function(){e.thisSubmitButtonOnClick&&e.thisSubmitButtonOnClick(a)}},"OK"),!!e.showBonusInformation&&r.a.createElement("div",{className:Rt.a.bonusInformation},e.children)))},Ht=n(68),Ut=n.n(Ht),Mt=function(e){var t=r.a.useState(),n=Object(v.a)(t,2),a=n[0],o=n[1],i=[{value:!0,display:"yes",do:function(){console.log("default true chosen")}},{value:!1,display:"no",do:function(){console.log("default false chosen")}}],s=e.choices||i;if(void 0===a){var c=e.initialIndex||0;o(c);var l=s[c].value;console.log(c,l,s),s[c].do&&s[c].do(l)}return r.a.createElement("div",{className:[Ut.a.wrapper,e.className].join(" ")},r.a.createElement("div",{className:Ut.a.shiftRight},r.a.createElement("div",{className:Ut.a.label},e.thisInputLabel||""),r.a.createElement("div",{className:Ut.a.choiceArea},s.map((function(t,n){return r.a.createElement("div",{key:n,className:[Ut.a.choice,a===n?Ut.a.selected:""].join(" "),onClick:function(a){o(n),t.do&&t.do(t.value),e.onClick&&e.onClick(a),console.log("",t.display||String(t.value),"chosen")}},t.display||String(t.value))})))))},Vt=function(){var e=r.a.useContext(F),t=e.state,n=e.dispatch,a=r.a.useState(),o=Object(v.a)(a,2),i=o[0],s=o[1],c=r.a.useState(),l=Object(v.a)(c,2),u=l[0],d=l[1];if(!u){var m=Se(t.domain.txHistory,t.domain.domainName,t.chain.height,t.network);d(function(e,t){console.log("currentOwnerRenewAction running:");var n=[_e(e,t),be(e,t),he(e,t),fe(e,t),ge(e,t),ve(e,t)],a=[];return n.forEach((function(e){var t=[];e.permissions.forEach((function(e){var n=e.status();t.push(Object(g.a)({isAllowed:n},e))}));var n=[];e.permissions.forEach((function(e){n.push(e)})),e.conditions.forEach((function(e){n.push(e)})),a.push({type:e.type,info:e.info,isUsable:t.every((function(e){return e.isAllowed})),permissionList:t,suggestions:n})})),a}(m,t.wallet.address))}var p=function(e){var n=e.info.get,a=t.network,r=n.units,o=n.min,i=typeof n.value;if("number"===i){var s=o?"satoshi"===r?o/1e8:o:0,c="testnet"===a?"tBTC":"BTC",l="satoshi"===r?n.value/1e8:n.value;return{value:n.value,btcMin:""+s,btcMinFull:s.toFixed(8),type:i,units:r,btcUnits:c,btcValue:l,btcValueFull:l.toFixed(8)}}return{type:i,value:n.value}};r.a.useEffect((function(){if(!i){var e={};u&&u.forEach((function(t){e[t.info]={show:!1}})),s(e)}}),[u,i]);return r.a.createElement("div",{className:Lt.a.wrapper},r.a.createElement("div",{className:Lt.a.title},"Available ",r.a.createElement("span",{className:Lt.a.orange},"BNS")," ",r.a.createElement("br",null),"actions"),r.a.createElement("div",{className:Lt.a.availableActions},!!u&&u.map((function(e){if(e.isUsable){if(e.suggestions.some((function(e){return e.info.warning})))return"";var a=function(e){return e.suggestions.filter((function(e){return"get"in e.info}))||[]}(e),o=a.length>0||Fe(e).length>0;return r.a.createElement("div",{key:e.info},r.a.createElement(_t,{next:o?void 0:"true",onClick:function(){if(o){if(i){var t=i[e.info].show;s(Object(g.a)({},i,Object(Tt.a)({},e.info,{show:!t})))}}else dt(0,n,{action:JSON.parse(JSON.stringify(e))}),ot(0,n,5)}},e.info,o?r.a.createElement(r.a.Fragment,null,"\xa0..."):""),i&&i[e.info].show&&r.a.createElement(r.a.Fragment,null,a.map((function(t){if("boolean"===typeof t.info.get.value){var n=function(n){console.log("updated boolean:",n),u.find((function(t){return t.type===e.type})).suggestions.find((function(e){return e.info.describe===t.info.describe})).info.get.value=n,d(Object(z.a)(u))};return r.a.createElement(Mt,{key:t.info.describe,thisInputLabel:t.info.describe+": \n\n  "+t.info.get.name,initialIndex:t.info.get.value?1:0,choices:[{value:!1,display:"No",do:n},{value:!0,display:"Yes",do:n}]})}return r.a.createElement(Dt,{key:t.info.describe,showButton:"false",className:Lt.a.inputForms,thisInputLabel:t.info.describe+(t.info.get.min?"\n(at least "+p(t).btcMinFull+" "+p(t).btcUnits+" to get a winning "+"valid bid )".replace(/ /g,"\xa0"):""),thisInitialValue:"number"===typeof t.info.get.value?p(t).btcValueFull:t.info.get.value,sanitizeFilters:"number"===typeof t.info.get.value?["number","no_leading_zeros","decimal_point","max_decimal_places:8"]:["string"],thisInputOnChange:function(n){var a;"number"===typeof t.info.get.min||"number"===typeof t.info.get.value?(a=H(n.target.value,["no_spaces","fractions","no_leading_zeros","decimal_point"]),a="satoshi"===t.info.get.units?Math.round(1e8*parseFloat(a)):Math.round(parseFloat(a))):a=H(n.target.value,["basic","no_spaces"]),u.find((function(t){return t.type===e.type})).suggestions.find((function(e){return e.info.describe===t.info.describe})).info.get.value=a,d(Object(z.a)(u)),console.log("Updated suggestionToGet.info.get:",t.info.get)}})})),Fe(e).length>0&&r.a.createElement(yt,{description:"Details...",show:"false"},r.a.createElement("p",null,Fe(e).map((function(e,n){var a=e.info.describe||"",o=e.info.set.name||"";return r.a.createElement("span",{key:a},n+1,". ",a,": ","\n",function(e,n){for(var a=e.info.set,o=e.info.set.value,i=[""],s=String(o).split(/ |\n/),c=a.units.split(" "),l=0;l<s.length;l++){var u=s[l],d=c[l%c.length];l%c.length===0&&0!==l&&(i=[].concat(Object(z.a)(i),["\n"])),l%c.length===0&&n.bullets&&(i=[].concat(Object(z.a)(i),[" + "])),isNaN(Number(u))?n.strings&&(i=[].concat(Object(z.a)(i),[" "],Object(z.a)(n.strings(u)),[" "])):(n.btcValueFull&&(i=[].concat(Object(z.a)(i),"satoshi"===d?[(parseInt(u,10)/1e8).toFixed(8)]:[parseFloat(u).toFixed(8)])),n.btcUnits&&(i=[].concat(Object(z.a)(i),["testnet"===t.network?" tBTC":" BTC"])))}return r.a.createElement(r.a.Fragment,null,i)}(e,{btcValueFull:!0,btcUnits:!0,bullets:!0,strings:function(e){return["for ",r.a.createElement("span",{key:a+e,className:Lt.a.breakable},e)]}})," "+("("+o+")").replace(/ /g,"\xa0"))}))))),i&&i[e.info].show&&r.a.createElement(_t,{className:Lt.a.okButton,next:"true",onClick:function(){dt(0,n,{action:e}),ot(0,n,5)}},"OK"))}return""}))),r.a.createElement("div",{className:Lt.a.unavailableActions},r.a.createElement(yt,{description:"Show unavailable actions",className:Lt.a.unavailableActions__title},r.a.createElement("div",{className:Lt.a.unavailableActions__actionList},!!u&&u.map((function(e){return e.isUsable?"":r.a.createElement("div",{className:Lt.a.unavailableActions__actionList__action,key:e.info},r.a.createElement("div",{className:Lt.a.unavailableActions__actionList__action__title},e.info),r.a.createElement("div",{className:Lt.a.unavailableActions__actionList__action__permissionList},e.permissionList.map((function(e){return e.isAllowed?"":r.a.createElement("div",{className:Lt.a.unavailableActions__actionList__action__permissionList__permission,key:e.info.describe},"- ",e.info.describe)}))))}))))),r.a.createElement("div",{className:Lt.a.buttonWrapper},r.a.createElement(_t,{back:"true",onClick:function(){ot(0,n,3)}},"Back")))},zt=n(15),Jt=n.n(zt),qt=function(){var e,t=r.a.useContext(F),n=t.state,a=t.dispatch,o=r.a.useState({network:"",address:""}),i=Object(v.a)(o,2),s=i[0],c=i[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";Object.keys(e).forEach((function(n){var a=e[n];t+=n+" "+a+" "}));var r=(t=t.slice(0,-1))!==n.choices.embedString;r&&dt(0,a,{embedString:t})},u=function(){var e=n.choices.embedString,t=function(){var e=n.choices.action,t="";return e.suggestions.forEach((function(e){"command"in e.info&&(t+=e.info.command+" ",t+=e.info.get.value+" ")})),t=t.slice(0,-1)}();return(e+(""===t||""===e?"":" ")+t).split(" ").reduce((function(e,t,n,a){return n%2===1?Object(g.a)({},e,Object(Tt.a)({},a[n-1],t)):e}),{})};""===n.choices.embedString&&l(u());var d=Oe((null===(e=T(n))||void 0===e?void 0:e.forwards)||[]).reverse(),m=Ie(n.choices.embedString)+n.choices.embedBuffers.reduce((function(e,t){return e+t.network.length+t.address.length+1}),0),p=M.a-m,f=p<0,h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{embededBuffer:null},o=t.embededBuffer,i=o?"".concat(o.address.length," bytes long"):u()[e],s=o?o.network.length+1+o.address.length:Ie(e+" "+i),d=r.a.createElement("i",null," ","(",s,"-",s+1,"B)"),m=function(){if(e.startsWith("!")){var t=Ae(e,i);return{content:r.a.createElement(r.a.Fragment,null,t?r.a.createElement(r.a.Fragment,null,'"',t.info,'" user action. ',t.getterName," is set to"," ",r.a.createElement("span",null,t.value),"."):"User action",d),allowRemoval:!1}}if(o&&"?"===e){var n=Re.a.encode(o.address);return{content:r.a.createElement(r.a.Fragment,null,"Updating ",r.a.createElement("span",null,"stealth address")," to an address",r.a.createElement("span",null," "+n.slice(0,7)+"..."+n.slice(-7)+" "),d),allowRemoval:!0}}return""!==i?{content:r.a.createElement(r.a.Fragment,null,"Updating forwarding on ",r.a.createElement("span",null," "+e+" "),"network to an address of ",r.a.createElement("span",null," "+i+" "),d),allowRemoval:!0}:""===i?{content:r.a.createElement(r.a.Fragment,null,"Deleting previously set forwarding information for",r.a.createElement("span",null," "+e+" ")," network",d),allowRemoval:!0}:{content:""}};return r.a.createElement("div",{className:Jt.a.updateItem,key:e,onClick:function(){e.startsWith("!")||o||c({network:e,address:String(i)})}},r.a.createElement("div",{className:Jt.a.updateInfo},m().content),m().allowRemoval&&r.a.createElement("div",{className:["btnCircle",Jt.a.updateCancel,"addTooltipRight"].join(" "),onClick:function(t){if(o){var r=n.choices.embedBuffers.filter((function(e){return o.network!==e.network}));dt(0,a,{embedBuffers:r})}else{var i=Object(g.a)({},u());delete i[e],l(i)}t.stopPropagation()}},r.a.createElement("span",null,"\xd7"),r.a.createElement("aside",null,"Remove from planned changes")))};return console.log("bytes to embed",m),r.a.createElement("div",{className:Jt.a.wrapper},r.a.createElement("div",{className:Jt.a.title},"Update forwarding information"),r.a.createElement("div",{className:Jt.a.subtitle},"BNS action: ",n.choices.action.info),r.a.createElement("div",{className:Jt.a.changes},0===n.choices.embedString.length&&0===n.choices.embedBuffers.length?"no forwarding updates":"planned forwarding updates",!f&&r.a.createElement("div",{className:Jt.a.bytesLeft},p," Bytes left"),f&&r.a.createElement("div",{className:Jt.a.bytesOver},"Too much by ",Math.abs(p)," Bytes"),Object.keys(u()).map((function(e){return h(e)})),n.choices.embedBuffers.map((function(e){return h(e.network,{embededBuffer:e})}))),r.a.createElement("div",{className:Jt.a.editor},s.network.length>0&&r.a.createElement("div",{className:[Jt.a.btnDelete,"canPress"].join(" "),onClick:function(){l(Object(g.a)({},u(),Object(Tt.a)({},s.network,""))),c({network:"",address:""})}},"delete old"),r.a.createElement("div",{className:Jt.a.editorNetwork},r.a.createElement("aside",null,"Network"),r.a.createElement("textarea",{spellCheck:!1,value:s.network,placeholder:"e.g. btc",onChange:function(e){var t=H(e.target.value,["oneline","no_spaces"]);c(Object(g.a)({},s,{network:t}))}})),r.a.createElement("div",{className:Jt.a.editorAddress},r.a.createElement("aside",null,"Forwarding address"),r.a.createElement("textarea",{spellCheck:!1,value:s.address,placeholder:"e.g. your btc address",onChange:function(e){var t=H(e.target.value,["oneline","no_spaces"]);c(Object(g.a)({},s,{address:t})),console.log("forwarding sanitized:",'"'+t+'"')}})),r.a.createElement("div",{className:["btnCircle",Jt.a.btnAdd,"canPress","addTooltip"].join(" "),onClick:function(){""!==s.network&&(l(Object(g.a)({},u(),Object(Tt.a)({},s.network,s.address))),c({network:"",address:""}))}},r.a.createElement("span",null,"+"),r.a.createElement("aside",null,"Add to planned changes"))),r.a.createElement("div",{className:Jt.a.pastList},r.a.createElement(yt,{description:"Current forwards (expand for info):"},r.a.createElement("p",null,"Enter the forwarding addresses you want to use (e.g. long bitcoin address) and specify on which network that address should be used (e.g. btc) when someone wants to reach you after looking up your domain alias.",r.a.createElement("br",null),r.a.createElement("br",null),"Submit new updates by hitting [+] button. Remove updates by hitting [x] buttons.",r.a.createElement("br",null),r.a.createElement("br",null),"Below, the currently active forwarding addresses are shown, if any.",r.a.createElement("br",null),r.a.createElement("br",null),"Edit them by reusing the exact same network or remove by setting forwarding address to nothing or hitting [delete old] button under network name text.")),d.map((function(e,t){return r.a.createElement("div",{className:Jt.a.pastPair,key:t,onClick:function(){c({network:decodeURIComponent(e.network),address:decodeURIComponent(e.address)})}},r.a.createElement("div",{className:Jt.a.pastNetwork},"?"!==decodeURIComponent(e.network)?decodeURIComponent(e.network):"? (stealth)"),r.a.createElement("div",{className:Jt.a.pastAddress},decodeURIComponent(e.address)))}))),r.a.createElement("div",{className:Jt.a.buttonWrapper},r.a.createElement(_t,{back:"true",onClick:function(){ot(0,a,4)}},"Back"),r.a.createElement(_t,{next:"true",show:m>M.a?"false":"true",onClick:function(){ot(0,a,6)}},"Ready"),!n.choices.embedBuffers.some((function(e){return"?"===e.network}))&&!d.some((function(e){return"?"===decodeURIComponent(e.network)}))&&r.a.createElement(_t,{colorbutton:"var(--colorHighlightDark)",onClick:function(){console.log("adding stealth address");var e={network:"?",address:De(n.wallet.mnemonic,n.network)};dt(0,a,{embedBuffers:[].concat(Object(z.a)(n.choices.embedBuffers),[e])})}},"Add a stealth address")))},Gt=n(26),Yt=n.n(Gt),Kt=n(54),Qt=n.n(Kt),Zt=function(e){var t,n,a,o=e.initialFee,i=e.setFee,s=e.getFeeSuggestions,c=r.a.useState(o),l=Object(v.a)(c,2),u=l[0],d=l[1],m=r.a.useState({showSuggestions:!1,apiSuccess:!1,min20:1,min40:1,min60:1}),p=Object(v.a)(m,2),f=p[0],h=p[1];r.a.useEffect((function(){var e=function(){f.showSuggestions&&h(Object(g.a)({},f,{showSuggestions:!1}))};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[f]);return r.a.createElement("div",{className:[Qt.a.fees,e.className].join(" ")},r.a.createElement("div",{className:Qt.a.fees__rate},r.a.createElement("aside",null,"Fee rate (sat / vByte):"),r.a.createElement("textarea",{spellCheck:!1,value:u,placeholder:"e.g. 1.2",onChange:function(e){var t=H(e.target.value,["numbers","decimal_point","no_leading_zeros","max_decimal_places:3"]);t=i(t)||t,d(t)}})),r.a.createElement("div",{className:Qt.a.fees__apicall},r.a.createElement(_t,{onClick:function(){!function(){var e;D.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(f.apiSuccess){t.next=12;break}return t.prev=1,t.next=4,D.a.awrap(s());case 4:e=t.sent,h({min20:e[2],min40:e[4],min60:e[6],apiSuccess:!0,showSuggestions:!0}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:t.next=13;break;case 12:h(Object(g.a)({},f,{showSuggestions:!f.showSuggestions}));case 13:case"end":return t.stop()}}),null,null,[[1,8]])}()},minor:"true"},"Suggest"),f.showSuggestions&&r.a.createElement("div",{className:Qt.a.fees__feeSelection},r.a.createElement("div",{className:Qt.a.fees__feeSelection__choice,onClick:function(){d(f.min20),i(f.min20),h(Object(g.a)({},f,{showSuggestions:!1}))}},"< ","20 min ( ",null===(t=f.min20)||void 0===t?void 0:t.toFixed(1)," sat / vByte )"),r.a.createElement("div",{className:Qt.a.fees__feeSelection__choice,onClick:function(){d(f.min40),i(f.min40),h(Object(g.a)({},f,{showSuggestions:!1}))}},"< ","40 min ( ",null===(n=f.min40)||void 0===n?void 0:n.toFixed(1)," sat / vByte )"),r.a.createElement("div",{className:Qt.a.fees__feeSelection__choice,onClick:function(){d(f.min60),i(f.min60),h(Object(g.a)({},f,{showSuggestions:!1}))}},"< ","60 min ( ",null===(a=f.min60)||void 0===a?void 0:a.toFixed(1)," sat / vByte )"))))},Xt=function(){var e,t,n=r.a.useContext(F),a=n.state,o=n.dispatch,i="";try{t=Object(Be.a)(a.wallet,a.domain,a.choices,a.network)}catch(h){(i=String(h.message)).endsWith("has no matching Script")&&(i+=" \n(address provided seems invalid)"),console.log("error details if necessary:",h)}var s=a.choices.embedString.split(" ").reduce((function(e,t,n){return n%2===1?e+1:e}),0)+a.choices.embedBuffers.length,c=r.a.useState({ok:!1,txid:"",reason:""}),l=Object(v.a)(c,2),u=l[0],d=l[1],m="testnet"===a.network?" tBTC ":" BTC ",p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:Yt.a.balance},(e/1e8).toFixed(8)),m)},f=t?Math.max(t.gatheredFromWallet-t.change,0):void 0;return r.a.createElement("div",{className:Yt.a.wrapper},r.a.createElement("div",{className:Yt.a.title},"Finalize transaction details"),r.a.createElement("div",{className:Yt.a.fees},r.a.createElement(Zt,{initialFee:a.choices.feeRate,getFeeSuggestions:function(){return D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.awrap(Ze(a,o,(function(){return Me(a.network,a.api.path)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))},setFee:function(e){return+e>1e3&&(e=String(1e3)),+e<1&&(e=String(1)),dt(0,o,{feeRate:parseFloat(e)}),e}})),r.a.createElement("div",{className:Yt.a.totalCost},t?r.a.createElement(r.a.Fragment,null,"Your final cost: ",p(f)):" "),r.a.createElement("div",{className:[Yt.a.txSummary,"letter_breakable"].join(" ")},!!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,null,r.a.createElement("table",{className:"word_breakable"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Action:"),r.a.createElement("td",null,a.choices.action.info)),r.a.createElement("tr",null,r.a.createElement("td",null,"Updates:"),r.a.createElement("td",null,s)),r.a.createElement("tr",null,r.a.createElement("td",null,"Wallet:"),r.a.createElement("td",null,r.a.createElement("p",null,p(Object(tt.c)(a.wallet.utxoList))," total across ",a.wallet.utxoList.length," utxo"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Inputs:"),r.a.createElement("td",null,r.a.createElement("p",null,p(t.gatheredFromWallet)," from"," ",t.nInputsFromWallet," wallet utxo"),r.a.createElement("p",null,p(t.gatheredFromOther)," from"," ",t.nInputsFromOther," notification utxo"),r.a.createElement("p",null,p(t.totalGathered)," total (",t.nInputsFromWallet+t.nInputsFromOther," inputs)"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Outputs:"),r.a.createElement("td",null,r.a.createElement("p",null,"Burning ",p(t.burnAmount)," at #0"),r.a.createElement("p",null,"Sending ",p(t.notifyAmount)," at #1 (notification)"),r.a.createElement("p",null,"Change of ",p(t.change)," sent back at #2"),r.a.createElement("p",null,"Refunds of ",p(t.refundsAmount)," total"),r.a.createElement("p",null,p(t.totalGathered-t.fee)," total (",t.nOutputs," outputs)"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Miner fee:"),r.a.createElement("td",null,r.a.createElement("p",null,p(t.fee)," (",(t.fee/t.valueNeeded*100).toFixed(1),"%)"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Size:"),r.a.createElement("td",null,t.thisVirtualSize," vBytes")),r.a.createElement("tr",null,r.a.createElement("td",null,"Cost:"),r.a.createElement("td",null,r.a.createElement("p",null,"+ Transaction requires ",p(t.valueNeeded)),r.a.createElement("p",null,"- Using ",p(t.gatheredFromOther)," from anyone-can-spend utxo"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Net user cost:"),r.a.createElement("td",null,p(t.gatheredFromWallet-t.change))))))),!t&&r.a.createElement("div",{className:[Yt.a.txSummary,"word_breakable",Yt.a.error].join(" ")},"calculation failed ",r.a.createElement("br",null),i)),r.a.createElement("div",{className:Yt.a.status},u.ok?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[Yt.a.status__button,"canPress"].join(" "),onClick:function(){var e="https://blockstream.info/"+"".concat("testnet"===a.network?"testnet/":"","tx/")+"".concat(u.txid);window.open(e,"_blank")}},"Success! Open in explorer")):u.reason.length>0?r.a.createElement("div",{className:Yt.a.status__failed},u.reason):t&&t.hex?r.a.createElement("span",{className:Yt.a.notify},"BNS transaction ready"):""),r.a.createElement("div",{className:Yt.a.buttonWrapper},r.a.createElement(_t,{back:"true",onClick:function(){ot(0,o,5)}},"Back"),r.a.createElement(_t,{show:""!==(null===(e=t)||void 0===e?void 0:e.hex)?"true":"false",onClick:function(){var e;return D.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||!t.hex){n.next=13;break}return n.prev=1,n.next=4,D.a.awrap(Ze(a,o,(function(){return Ge(t.hex,a.network,a.api.path)})));case 4:e=n.sent,d({ok:!0,txid:e.txid,reason:""}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),d({ok:!1,txid:"",reason:n.t0.message});case 11:n.next=14;break;case 13:d({ok:!1,txid:"",reason:""});case 14:case"end":return n.stop()}}),null,null,[[1,8]])}},"Broadcast")))},$t=n(92),en=n.n($t),tn=function(){var e,t=null===(e=r.a.useContext(F).state.pageInfo)||void 0===e?void 0:e.current;return!t&&console.log("Unknown Page"),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[en.a.wrapper].join(" ")},r.a.createElement(vt,null),r.a.createElement("div",{className:[en.a.scroller,"scrollbar"].join(" ")},r.a.createElement("div",{className:[en.a.horizontalScaler].join(" ")},1===t&&r.a.createElement(St,null),2===t&&r.a.createElement(Ct,null),3===t&&r.a.createElement(Ft,null),4===t&&r.a.createElement(Vt,null),5===t&&r.a.createElement(qt,null),6===t&&r.a.createElement(Xt,null)))))};function nn(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(tn,null))}var an=n(21),rn=n.n(an);function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=e-t,a=n<=0;n=Math.abs(n);var r=Math.floor(n/864e5);n-=864e5*r;var o=Math.floor(n/36e5)%24;n-=36e5*o;var i=Math.floor(n/6e4)%60;return{dhm:"".concat(r," days ").concat(o," hours ").concat(i," min"),dh:"".concat(r," days ").concat(o," hours"),isExpired:a,msDiff:n,timestampMsec:e,referenceTimestampMsec:t}}var sn,cn=function(){var e=r.a.useContext(F).state,t={isExpired:!0,dh:"",msDiff:0},n=T(e);n&&(t=on(10*(n.winHeight+M.g-e.chain.height)*60*1e3,0));var a,o="testnet"===e.network?" tBTC ":" BTC ",i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:rn.a.balance},(e/1e8).toFixed(8)),o)},c=r.a.createElement("span",{className:[rn.a.breakable,rn.a.linkable].join(" "),key:"notify1",onClick:function(){var t="testnet"===e.network?"testnet/":"";window.open("https://blockstream.info/".concat(t,"address/").concat(e.domain.notificationAddress),"_blank")}},e.domain.notificationAddress),l=0,u=n?[[["Owner"],[[(a=n.address,r.a.createElement("span",{className:[rn.a.breakable,rn.a.linkable].join(" "),key:a+l++,onClick:function(){var t="testnet"===e.network?"testnet/":"";window.open("https://blockstream.info/".concat(t,"address/").concat(a),"_blank")}},a))]]],[["Notifications"],[[c]]],[["Ownership extended"],[[n.winHeight+" block height"],[new Date(1e3*n.winTimestamp).toUTCString()],[on(1e3*n.winTimestamp).dh+" ago"],[r.a.createElement(r.a.Fragment,{key:"ownership1"},i(n.burnAmount)," winning bid")]]],[["Ownership expires"],[[n.winHeight+M.g+" block height"],["\u2248 "+new Date(1e3*(10*M.g*60+n.winTimestamp)).toUTCString()],["in \u2248 "+t.dh]]]]:[],d=function(e){var t=e.domain.bidding;return{isBurn:t.type===b.b.BURN,bidding:t}}(e),m=d.isBurn,p=d.bidding,f=m?[[["Owner"],[["Owner will be determined when bidding period ends"]]],[["Notifications"],[[c]]],[["Bidding start"],[[p.startHeight+" block height"],[new Date(1e3*p.bids[0].timestamp).toUTCString()],[on(1e3*p.bids[0].timestamp).dh+" ago"]]],[["Bidding ends"],[[p.endHeight+" block height"],["\u2248 "+new Date(1e3*p.bids[0].timestamp+10*M.c*60*1e3).toUTCString()],["in \u2248 "+on(1e3*p.bids[0].timestamp+10*M.c*60*1e3).dh]]],[["Bidders"],Object(z.a)(p.bids.map((function(e,t){return[r.a.createElement(r.a.Fragment,{key:"bidding"+t},i(e.value)," burned by"," ",r.a.createElement("span",{className:rn.a.breakable},e.address))]})))]]:[],h=[[["Owner"],[["No owner. No bids."]]],[["Notifications"],[[c]]]],v=function(e,t){return 0===e.length?"":r.a.createElement("div",{className:rn.a.ownershipDetails},r.a.createElement(yt,{description:t},r.a.createElement("table",null,r.a.createElement("tbody",null,e.map((function(e,t){return r.a.createElement("tr",{key:e[0][0]},r.a.createElement("td",null,e[0][0]),r.a.createElement("td",null,e[1].map((function(e,n){return r.a.createElement("p",{key:[t,n].join(" ")},e)}))))}))))))},g=n?Oe(n.forwards):[];return r.a.createElement("div",{className:rn.a.wrapper},r.a.createElement("div",{className:rn.a.matches},r.a.createElement("div",null,e.domain.txHistory.length," transaction",1===e.domain.txHistory.length?"":"s"," found on"," ",e.network),r.a.createElement("div",null,g.length," current forward",1===g.length?"":"s")),r.a.createElement("div",{className:[rn.a.scrollbars,"scrollbar"].join(" ")},r.a.createElement("div",{className:rn.a.listContainer},r.a.createElement("div",{className:rn.a.describe},!!m&&v(f,"Bidding period domain details"),!m&&!n&&v(h,"Unowned domain details"),!!n&&v(u,"Owned domain details")),g.map((function(t){var n=function(e,t){if(""===e.network||""===e.address||e.network.startsWith("!"))return{render:!1};var n=e.network.split("!")[0];if("p2wsh"===n||"btc"===n||"p2pkh"===n||"p2wpkh"===n||"p2sh"===n)return{where:"btc:",what:e.address,link:"https://blockstream.info/".concat("testnet"===t?"testnet/":"","address/")+e.address,render:!0};if("?"===decodeURIComponent(n)){var a=decodeURIComponent(e.address).replace(">","").replace("<","");return{where:"stealth-address:",what:"".concat(a.slice(0,6),"...").concat(a.slice(-6)),link:void 0,render:!0}}return"http"===n||"https"===n||"url"===n||"web"===n||"forums"===n?{where:"https://",what:e.address,link:"https://"+e.address,render:!0}:"twitter"===n?{where:"twitter.com/",what:e.address,link:"https://twitter.com/"+e.address,render:!0}:"github"===n?{where:"github.com/",what:e.address,link:"https://github.com/"+e.address,render:!0}:"youtube"===n?{where:"youtu.be/",what:e.address,link:"https://www.youtube.com/watch?v="+e.address,render:!0}:"email"===n||"e-mail"===n?{where:"mailto:",what:e.address.replace("%40","@"),link:"mailto:"+e.address,render:!0}:{where:n+" :",what:" "+e.address,link:void 0,render:!0}}(t,e.network);return n.render?r.a.createElement("a",{key:t.network,className:rn.a.listItem,href:(null===n||void 0===n?void 0:n.link)||void 0,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:rn.a.key},n.where),n.what):""})),r.a.createElement("div",{className:rn.a.avaiability},!n&&r.a.createElement(s.b,{to:"/create",className:rn.a.createLink},m?"Join bidding":"Domain available!")))))},ln=n(46),un=n.n(ln),dn=function(e){var t,n,o=r.a.useContext(F),i=o.state,s=o.dispatch,l=Object(c.g)(),u=null===e||void 0===e?void 0:null===(t=e.match)||void 0===t?void 0:null===(n=t.params)||void 0===n?void 0:n.alias,d=window.location.hash,m=function(){"#/"!==window.location.hash&&l.push("/")};u&&"#/"!==d&&(console.log("alias id detected in url:",u,d),et(Object(g.a)({},i,{alias:u}),s).then((function(){return m()})).catch((function(){return m()})));var p=function(){return i.pageInfo.checkedLightSearch},f=Object(a.useRef)(null);return Object(a.useEffect)((function(){f&&f.current&&(f.current.selectionEnd=f.current.value.length,f.current.selectionStart=f.current.value.length,f.current.focus())}),[]),Object(a.useEffect)((function(){var e=function(e){var t,n;window.sessionStorage.getItem("fromWallet")===String(!0)||["`"].some((function(t){return t===e.key}))||"txtSearch"!==(null===(t=document.activeElement)||void 0===t?void 0:t.id)&&(null===f||void 0===f||null===(n=f.current)||void 0===n||n.focus())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),r.a.createElement("div",{className:un.a.wrapper},u&&"#/"!==d&&r.a.createElement(c.a,{to:"/"}),r.a.createElement("div",{className:p()?[un.a.lblMainTitle,un.a.lblMainTitleAfter].join(" "):[un.a.lblMainTitle].join(" ")},r.a.createElement("span",null,"Bitcoin")," Name System"),r.a.createElement("div",{className:p()?[un.a.divSearch,un.a.divSearchAfter].join(" "):un.a.divSearch},r.a.createElement("textarea",{id:"txtSearch",className:un.a.txtSearch,cols:30,rows:1,spellCheck:!1,value:i.alias,placeholder:"e.g. satoshi",ref:f,onChange:function(e){var t;!function(e,t,n){var a;D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a=H(n,"url"),e.abrupt("return",t({type:U,payload:a}));case 3:case"end":return e.stop()}}))}(0,s,null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)},onKeyPress:function(e){"Enter"===e.key&&et(i,s)}}),r.a.createElement(_t,{sizebutton:"2.6",onClick:function(){et(i,s)}},".btc")),!!p()&&r.a.createElement(cn,null))},mn=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(dn,e))},pn=n(93),fn=n.n(pn),hn=function(){var e=r.a.useContext(F),t=e.state,n=e.dispatch;return r.a.createElement("div",{className:[fn.a.wrapper,"scrollbar"].join(" ")},r.a.createElement("div",{className:fn.a.contentWrapper},r.a.createElement("div",{className:fn.a.title},"Settings"),r.a.createElement("div",null,"(todo)"),"subject to changes until launch high chance of bugs and losses, especially until reviewed",r.a.createElement("div",null,"Network:",r.a.createElement(Mt,{choices:[{value:"testnet",do:function(){n({type:h.LOAD_STATE,payload:Object(g.a)({},t,{network:"testnet"})})}},{value:"mainnet",do:function(){n({type:h.LOAD_STATE,payload:Object(g.a)({},t,{network:"bitcoin"})})}}]})),r.a.createElement(Dt,{style:{width:"80%"},thisInputLabel:"Path for full node with esplora API",thisInitialValue:t.api.path[t.network],showBonusInformation:"true",sanitizeFilters:["url"],thisSubmitButtonOnClick:function(e){t.api.path[t.network]=e,console.log("click set value to ",e),n({type:h.LOAD_STATE,payload:Object(g.a)({},t)})}},t.network," : ",t.api.path[t.network]),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,"Automatically save data to browser (local storage) ? (todo)",r.a.createElement("br",null),r.a.createElement(Mt,{choices:[{value:"not allow"},{value:"allow"}]})),r.a.createElement("div",null,"(if yes) Provide a password to encrypt local storage ",r.a.createElement("br",null),"with to hide it from other applications (todo)",r.a.createElement("br",null)," [todo textbox form]")))},vn=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(hn,null))},gn=n(25),bn=n.n(gn),_n=function(){var e=r.a.useContext(F),t=e.state,n=e.dispatch,a=r.a.useState(!0),o=Object(v.a)(a,2),i=o[0],s=o[1],l=r.a.useState(!1),u=Object(v.a)(l,2),d=u[0],m=u[1],p=r.a.useState(""),f=Object(v.a)(p,2),g=f[0],b=f[1],_=P(t.wallet.utxoList),w=Object(c.g)();t.wallet.mnemonic||(ot(0,n,1),w.push("/create"));var E=function(){return D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=10;break}return e.prev=1,s(!1),e.next=5,D.a.awrap(lt(t,n,h.UPDATE_WALLET));case 5:s(!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),null,null,[[1,8]])};if(!d&&!t.pageInfo.checkedWallet){m(!0);D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.awrap(E());case 2:case"end":return e.stop()}}))}return r.a.createElement("div",{className:bn.a.wrapper},r.a.createElement("div",{className:bn.a.top},r.a.createElement("div",{className:bn.a.top__title},"Withdraw from ",r.a.createElement("span",null,"BNS"))),r.a.createElement("div",{className:bn.a.contentWrapper},r.a.createElement("div",null,t.pageInfo.checkedWallet&&r.a.createElement(r.a.Fragment,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r.a.createElement("div",{className:bn.a.total},r.a.createElement("span",{className:bn.a.total__value},L(e)),r.a.createElement("span",{className:bn.a.total__units}," "+W(t)+" "))}(_)),r.a.createElement("div",{className:bn.a.buttonWrapper},r.a.createElement(_t,{className:bn.a.btnScan,onClick:function(){return D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:E();case 1:case"end":return e.stop()}}))},minor:"true"},!i&&"scanning...",i&&t.pageInfo.checkedWallet&&"re-scan",i&&!t.pageInfo.checkedWallet&&"scan"))),r.a.createElement("div",null,t.pageInfo.checkedWallet&&r.a.createElement("div",{className:bn.a.from},r.a.createElement("div",{className:bn.a.from__label},"From"," ",r.a.createElement("span",{className:[bn.a.from__alias,"letter_breakable"].join(" ")},t.alias,".btc")," ","owner address"),r.a.createElement("div",{className:[bn.a.from__address,"letter_breakable"].join(" ")},t.wallet.address))),t.pageInfo.checkedWallet&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt,{className:bn.a.withdraw_control,thisInputLabel:"Send to",placeholder:"Bitcoin address or *.btc BNS alias",showButton:"true",sanitizeFilters:["oneline"],thisInitialValue:"",thisInputOnChange:function(e){b(e.target.value)},getDropdowns:function(e){var a;return D.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.endsWith(".btc")){r.next=2;break}return r.abrupt("return",[]);case 2:return r.next=4,D.a.awrap(et(t,n,{otherDomain:e}));case 4:return a=r.sent,r.abrupt("return",a?Ne(a).toSpaceSeparated:[]);case 6:case"end":return r.stop()}}))},renderDropdowns:function(e){var t=e.textValue,n=e.item.split(" "),a=Object(v.a)(n,2),o=a[0],i=a[1];return{contents:r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,decodeURIComponent(o),"@",t),"\xa0\xa0",decodeURIComponent(i)),selection:i}},thisSubmitButtonOnClick:function(e){if(e){console.log("submitting withdrawal to wallet");var n=JSON.parse(JSON.stringify(t.wallet.utxoList));n.forEach((function(e){e.sequence=4294967294,e.canJustSign=!0,e.keyPairs=[t.wallet.WIF],e.sighashTypes=["SIGHASH_ALL"],e.address=t.wallet.address,e.confirmed=!0,e.info="BNS control wallet"}));var a={showUI:!0,loadMode:"SENDING",notifyUI:"Withdraw from wallet?",network:t.network,utxoList:n,outputsFixed:{0:{address:g,value:_,minValue:500}},changeAddress:t.wallet.address};wn(a)}}}))))},wn=function(e){window.sessionStorage.setItem("toWallet",JSON.stringify(e)),window.dispatchEvent(new StorageEvent("storage"))},En=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_n,e))},kn=n(16),xn=n.n(kn),yn=n(13),Sn=n.n(yn),On=n(193),Nn=n(55),jn=n.n(Nn),An=function(e){return r.a.createElement("div",{className:[jn.a.outershell2,e.className].join(" "),style:e.size?{"--btcLogoInputSize":e.size.toString()}:{}},r.a.createElement("div",{className:[jn.a.btcLogo,jn.a.cutoffs].join(" ")},r.a.createElement("div",{className:[jn.a.btcLogo,jn.a.background].join(" ")}),r.a.createElement("div",{className:[jn.a.btcLogo,jn.a.theB].join(" ")},"B")))};!function(e){e.HISTORY="HISTORY",e.SENDING="SENDING",e.MAIN="MAIN"}(sn||(sn={}));var Cn={headline:"BNS Wallet",mode:sn.MAIN,history:[],lastError:""},In={showUI:!1,notifyUI:"",loadMode:"",network:"testnet",setVersion:2,setLocktime:0,feeRate:1,minFeeRate:1,maxFeeRate:1e3,minDustValue:500,result:{hex:"",virtualSize:0,outgoingValue:0,minOutgoingValue:0,changeValue:0,inputsValue:0,availableInputsValue:0,fee:0,txid:""},inputs:{},inputsFixed:{},utxoList:null,outputs:{},outputsFixed:{},changeAddress:null},Bn=function(e){var t=r.a.useState(!1),n=Object(v.a)(t,2),a=n[0],o=n[1],i=r.a.useState(Cn),s=Object(v.a)(i,2),c=s[0],l=s[1],u=r.a.useState({}),d=Object(v.a)(u,2),m=d[0],p=d[1],f=r.a.useState(Object(g.a)({},In,{},e.txBuilder||{})),h=Object(v.a)(f,2),b=h[0],_=h[1],w=r.a.useState(!1),E=Object(v.a)(w,2),k=E[0],x=E[1];a||(o(!0),Fn(m,p)),r.a.useEffect((function(){return Ln(m,_)}),[m]),r.a.useEffect((function(){return console.log("txBuilder object changed"),b.showUI?(x(!0),Pn({txBuilder:b}),void _(Object(g.a)({},b,{showUI:!1}))):b.loadMode&&Object.values(sn).includes(b.loadMode)?(l((function(e){return Object(g.a)({},e,{mode:b.loadMode})})),void _(Object(g.a)({},b,{loadMode:""}))):b.notifyUI?(l((function(e){return b.notifyUI&&b.notifyUI!==e.headline?Object(g.a)({},e,{headline:b.notifyUI}):b.notifyUI&&b.notifyUI===e.headline?e:Object(g.a)({},e,{headline:Cn.headline})})),void _(Object(g.a)({},b,{notifyUI:""}))):void 0}),[b]),r.a.useEffect((function(){window.sessionStorage.setItem("fromWallet",String(k))}),[k]);return r.a.createElement(r.a.Fragment,null,k&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Sn.a.interface_not,onClick:function(){x(!1)}}),r.a.createElement("div",{className:Sn.a.interface},c.mode===sn.SENDING&&function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Sn.a.title},c.headline),r.a.createElement(Zt,{className:Sn.a.feeSelection,initialFee:b.feeRate,getFeeSuggestions:function(){return e.api.getFeeSuggestions()},setFee:function(t){return+t>b.maxFeeRate&&(t=String(b.maxFeeRate)),+t<b.minFeeRate&&(t=String(b.minFeeRate)),e.export.feeRate(parseFloat(t)),_(Object(g.a)({},b,{feeRate:parseFloat(t)})),t}}),Object.keys(b.outputsFixed).map((function(e,t){var n=b.outputsFixed[e];return r.a.createElement(Dt,{key:"outputform"+String(t),className:Sn.a.amounts,thisInputLabel:r.a.createElement(r.a.Fragment,null,"#",e," Sending ",(1e-8*n.value).toFixed(8)," ","testnet"===b.network?"tBTC":"BTC"," to"," ",r.a.createElement("span",{className:"letter_breakable"},n.address)),showButton:"false",thisInitialValue:(1e-8*n.value).toFixed(8),sanitizeFilters:["fractions","decimal_point","no_leading_zeros","max_decimal_places:8"],thisInputOnChange:function(e){var t=Math.round(1e8*+e.target.value);n.value=t,e.target.value=String(+(1e-8*n.value).toFixed(8));var a=Pn({txBuilder:b});l(Object(g.a)({},c,{lastError:a})),_(Object(g.a)({},b))}})})),Object.keys(b.outputs).map((function(e,t){if(b.outputsFixed[e])return r.a.createElement("div",{key:"calcoutput_".concat(t)});var n=b.outputs[e];return console.log("calc outputs:",e,n.value),r.a.createElement("div",{className:[Sn.a.calculatedAmounts,"word_breakable"].join(" "),key:"calcoutput_".concat(t)},"#",e," Sending ",(1e-8*+n.value).toFixed(8)," ","testnet"===b.network?"tBTC":"BTC",n.info?" for ".concat(n.info," "):" ","to"," ",r.a.createElement("span",{className:"letter_breakable"},n.address))})),!!c.lastError&&r.a.createElement("div",{className:[Sn.a.lastError,"word_breakable"].join(" ")},c.lastError),r.a.createElement("div",{className:Sn.a.buttonWrapper},r.a.createElement(_t,{minor:"true",onClick:function(){x(!1)}},"Cancel"),r.a.createElement(_t,{showdisabled:b.result.hex?void 0:"true",onClick:function(){var t;return D.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("Send clicked"),""!==b.result.hex){n.next=3;break}return n.abrupt("return",void 0);case 3:return console.log("attempting to broadcast"),console.log("hex:\n",b.result.hex),n.prev=5,n.next=8,D.a.awrap(e.api.broadcastTx(b.result.hex));case 8:t=n.sent,console.log("broadcast success:",t),c.history.push({describe:"outgoing transaction",txid:t.txid,message:"",success:!0,txBuilder:JSON.parse(JSON.stringify(b)),timestamp:Date.now()}),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(5),console.log("broadcast failed:",n.t0),c.history.push({describe:"outgoing transaction",txid:"",message:n.t0.message,success:!1,txBuilder:JSON.parse(JSON.stringify(b)),timestamp:Date.now()});case 17:c.mode=sn.HISTORY,l(Object(g.a)({},c));case 19:case"end":return n.stop()}}),null,null,[[5,13]])}},"Send")))}(e),c.mode===sn.HISTORY&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Sn.a.title},"Past transactions"),r.a.createElement("div",{className:Sn.a.entries},c.history.slice().reverse().map((function(e,t){return r.a.createElement("div",{key:"historicEntry_".concat(t),className:Sn.a.entries__entry},r.a.createElement("div",{className:e.success?Sn.a.entries__entry__done:Sn.a.entries__entry__error},e.describe," : ",e.success?"Done":"Failed"),e.success?r.a.createElement(_t,{className:Sn.a.entries__entry__button,minor:"true",onClick:function(){var t="https://blockstream.info/"+"".concat("testnet"===e.txBuilder.network?"testnet/":"","tx/")+"".concat(e.txid);window.open(t,"_blank")}},"See online"):r.a.createElement("div",{className:Sn.a.entries__entry__message},e.message),r.a.createElement("div",{className:Sn.a.entries__entry__time},new Date(e.timestamp).toUTCString()))})))),c.mode===sn.MAIN&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Sn.a.title},"BNS Wallet"),r.a.createElement("div",null,"not loaded")))),r.a.createElement("div",{className:[Sn.a.logo_wrapper,e.className||""].join(" "),onClick:function(){console.log({params:m,txBuilder:b,wallet:c}),x(!k)}},r.a.createElement("div",null,r.a.createElement(An,{className:[Sn.a.logo,k?Sn.a.logo_selected:""].join(" ")}))))},Fn=function(e,t){return Tn(e,t),function(){Wn(e,t)}},Tn=function(e,t){window.addEventListener("storage",Rn(e,t))},Wn=function(e,t){window.removeEventListener("storage",Rn(e,t))},Ln=function(e,t){Object.keys(e).length>0&&t((function(t){return Object(g.a)({},t,{},e)}))},Pn=function(e){var t=e.txBuilder,n="";try{var a=Object(On.a)(t);console.log("successful tx done:\n",a)}catch(r){console.log("can not do psbt yet:",r),n=r.message}return console.log("recalc builder",t),n},Rn=function(e,t){return function(){console.log("handle Storage Change ran"),Wn(e,t);var n={},a=window.sessionStorage.toWallet?JSON.parse(window.sessionStorage.toWallet):null;if(console.log("found values:",a),a&&Object.keys(a).forEach((function(e){var t=a[e];n[e]=t})),Object.keys(n).length>0){var r=Object(g.a)({},e,{},n);console.log("new params added:",r),t(r)}Tn(e,t)}},Dn=n(94),Hn=n.n(Dn),Un=n(95),Mn=n.n(Un),Vn=function(e){return r.a.createElement("div",{className:[Mn.a.spinner,e.className].join(" "),style:e.width?{"--widthSpinner":e.width}:{}},r.a.createElement("div",{className:Mn.a.block}),r.a.createElement("div",{className:Mn.a.chain}))};console.log("VisualApi component imported");var zn={props:{},loops:{}},Jn=function(e){return void 0!==e.processId&&(zn.props.processId=e.processId),zn.props.setProcessId=e.setProcessId,zn.props.tasks=e.tasks,zn.props.setTasks=e.setTasks,zn.props.setBusy=e.setBusy,zn.props.busy=e.busy,r.a.useEffect((function(){var t=zn.props.processId;if(void 0!==zn.props.processId&&void 0!==zn.props.setProcessId&&void 0!==zn.props.tasks&&void 0!==zn.props.setTasks&&void 0!==zn.props.setBusy&&void 0!==zn.props.busy&&null===t){var n=e.delayStandby,a=e.delayBusy;!function(){var t,r,o;D.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,D.a.awrap(qn({delayBusy:a,delayStandby:n}));case 2:(t=i.sent)&&(r=t(),o=r.id,(0,r.launch)(),e.setProcessId(o));case 4:case"end":return i.stop()}}))}()}}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:e.onClick,className:[Hn.a.wrapper,e.className||""].join(" ")},r.a.createElement("div",{className:Hn.a.text,onClick:function(){console.log(Object.keys(zn.loops).map((function(e){return Object(g.a)({},zn.loops[e],{timedOut:Date.now()-zn.loops[e].time>2e3})})))}},e.message,e.tasks.length>0?r.a.createElement(r.a.Fragment,null," busy (",e.tasks.length,")"):r.a.createElement(r.a.Fragment,null," ready"))),e.tasks.length>0&&r.a.createElement(Vn,{className:Hn.a.spinner}))},qn=function e(t){var n,a,r,o,i,s,c,l,u,d,m,p,f,h,v;return D.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(n=t.delayStandby,a=void 0===n?1e3:n,r=t.delayBusy,o=void 0===r?5e3:r,i=t.id,s=void 0===i?null:i){g.next=4;break}return c=Date.now(),g.abrupt("return",(function(){return{id:c,launch:function(){return e({delayStandby:a,delayBusy:o,id:c})}}}));case 4:if(l=zn.props.tasks,u=zn.props.setTasks,d=zn.props.processId,!Gn(s)){g.next=9;break}return g.abrupt("return",void 0);case 9:if(m=Date.now(),p={id:s,time:m,terminate:!1},zn.loops[s.toString()]=p,Yn({time:m,processId:d,id:s}),!(f=l&&d&&s===d&&!zn.props.busy)){g.next=33;break}if(!(h=l[0])){g.next=33;break}return g.prev=17,zn.props.setBusy(!0),console.log("apiloop #".concat(s," executing api call"),JSON.stringify(zn,null,2)),g.next=22,D.a.awrap(h.run({delay:function(){return Kn({ms:o})}}));case 22:v=g.sent,h.resolve(v),g.next=30;break;case 26:g.prev=26,g.t0=g.catch(17),console.warn(g.t0),h.reject(g.t0);case 30:u(l.slice(1)),Kn({ms:o}),zn.props.setBusy(!1);case 33:if(f&&0!==l.length){g.next=36;break}return g.next=36,D.a.awrap(Kn({ms:a}));case 36:if(!Gn(s)){g.next=38;break}return g.abrupt("return",void 0);case 38:e({delayStandby:a,delayBusy:o,id:s});case 39:case"end":return g.stop()}}),null,null,[[17,26]])},Gn=function(e){var t;return!(null===(t=zn.loops[e.toString()])||void 0===t||!t.terminate)&&(console.log("apiloop #".concat(e," following termination request"),JSON.stringify(zn,null,2)),!0)},Yn=function(e){var t=e.time,n=e.processId,a=e.id,r=!1,o=!0;Object.keys(zn.loops).forEach((function(e){var i=zn.loops[e];t-i.time<2e3&&n&&i.id!==n&&(r=!0),i.id<a&&(i.terminate=!0,o=!1)})),n&&a!==n&&!r&&o&&(console.log("".concat(a," is new api loop replacing ").concat(n),JSON.stringify(zn.loops,null,2),zn),zn.loops[a.toString()].terminate=!1,zn.props.setProcessId(a))},Kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ms:500},t=e.callsPerSec,n=void 0===t?void 0:t,a=e.ms,r=void 0===a?void 0:a;return new Promise((function(e){return setTimeout(e,r||1e3/n)}))},Qn=function(){var e=r.a.useContext(F),t=e.state,n=e.dispatch,a=Object(c.g)(),o=r.a.useRef(null),i=r.a.useRef(null),s=r.a.useRef(null),l=r.a.useState({buttonWidth:o.current?o.current.offsetWidth:void 0,showCollapsed:!1,resizeTimer:0}),u=Object(v.a)(l,2),d=u[0],m=u[1];d.buttonWidth||window.setTimeout((function(){window.dispatchEvent(new Event("resize"))}),200);var p="/create"===Object(c.g)().location.pathname,f="/"===Object(c.g)().location.pathname,h="/about"===Object(c.g)().location.pathname,b="/settings"===Object(c.g)().location.pathname;r.a.useEffect((function(){window.setTimeout((function(){if(i.current&&s.current){var e=s.current.getBoundingClientRect(),t=i.current.getBoundingClientRect(),n=Math.round(t.left+.5*t.width-.5*e.width),a=Math.round(t.top-e.height-.4*t.height);s.current.style.top=a+"px",s.current.style.left=n+"px",s.current.style.opacity="var(--finalOpacity)"}}),100);var e=function(){if(o.current){document.body.classList.add("resize-animation-stopper"),clearTimeout(d.resizeTimer);var e=setTimeout((function(){document.body.classList.remove("resize-animation-stopper")}),400);m(Object(g.a)({},d,{resizeTimer:e,showCollapsed:!1,buttonWidth:o.current.getBoundingClientRect().width}))}};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[d]),r.a.useEffect((function(){var e=function(){d.showCollapsed&&m(Object(g.a)({},d,{showCollapsed:!1}))};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[d]);var _=[r.a.createElement("div",{key:"search",ref:f?void 0:o,className:[xn.a.button,f?xn.a.selected:""].join(" "),onClick:function(){!f&&a.push("/")}},"search")],w=[r.a.createElement("div",{key:"create",ref:f?o:void 0,className:[xn.a.button,p?xn.a.selected:""].join(" "),onClick:function(){!p&&a.push("/create")}},"owners")],E=[r.a.createElement("div",{key:"git",className:[xn.a.button].join(" "),onClick:function(){window.open("https://github.com/ildarmgt/BitcoinNameSystem","_blank")}},"<","source",">")],k=[r.a.createElement("div",{key:"about",className:[xn.a.button,h?xn.a.selected:""].join(" "),onClick:function(){!h&&a.push("/about")}},"about")],x=[r.a.createElement("div",{key:"settings",className:[xn.a.button,b?xn.a.selected:""].join(" "),onClick:function(){!b&&a.push("/settings")}},"settings")],y=[f?w:_,f?_:w,E,k,x],S=window.innerWidth,O=.25*(.005*(window.innerWidth+window.innerHeight)),N=d.buttonWidth?Math.min(Math.max(Math.floor(.5*S/(1.5*d.buttonWidth+2*O)),1),4):1,j=y.filter((function(e,t){return t<=N-1})),A=y.filter((function(e,t){return t>N-1}))||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:xn.a.warning},r.a.createElement("input",{type:"checkbox",id:"closewarning"}),r.a.createElement("label",{htmlFor:"closewarning"},"\u2715"),r.a.createElement("div",null,!1,"not reviewed for use")),r.a.createElement("div",{className:xn.a.leftCorner},r.a.createElement("div",{className:xn.a.wallet},r.a.createElement(Bn,{txBuilder:{network:t.network,feeRate:t.choices.feeRate},export:{feeRate:function(e){return dt(0,n,{feeRate:e})}},api:{getFeeSuggestions:function(){return Ze(t,n,(function(){return Me(t.network,t.api.path)}))},broadcastTx:function(e){return Ze(t,n,(function(){return Ge(e,t.network,t.api.path)}))}}})),p&&r.a.createElement("div",{className:xn.a.pageNum},"Page ",t.pageInfo.current,"/6"),r.a.createElement("div",{className:xn.a.api},r.a.createElement(Jn,{processId:t.api.processId,setProcessId:function(e){e&&pt(0,n,{processId:e})},tasks:t.api.tasks,setTasks:function(e){return pt(0,n,{tasks:e})},busy:t.api.running,setBusy:function(e){pt(0,n,{running:e}),console.log("setbusy:",e)},delayBusy:1e3/t.api.rateLimit,delayStandby:100,message:t.network}))),r.a.createElement("div",{className:xn.a.nav},!!A.length&&r.a.createElement("div",{className:[xn.a.collapsitron,d.showCollapsed?xn.a.menuShown:""].join(" "),ref:i,onClick:function(){m(Object(g.a)({},d,{showCollapsed:!d.showCollapsed}))}},"\xa0\xa0\xa0\xa0\xa0",r.a.createElement("div",{className:xn.a.dots},r.a.createElement("div",null))),j.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"nevbarbuttons"+t},e[0])})).reverse()),d.showCollapsed&&r.a.createElement("div",{className:xn.a.overflowMenu,ref:s},r.a.createElement("div",null,A.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"overflowbuttons"+t},e[0])})).reverse())))},Zn=(n(394),function(){var e=new URLSearchParams(window.location.search).keys().next().value;return e&&console.log("search param detected after ?",e),e&&window.history.pushState({},"",window.location.pathname+"#/id/"+e),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content"},r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/id/:alias",component:mn}),r.a.createElement(c.b,{exact:!0,path:"/id/",component:mn}),r.a.createElement(c.b,{path:"/about",component:f}),r.a.createElement(c.b,{path:"/create",component:nn}),r.a.createElement(c.b,{path:"/wallet",component:En}),r.a.createElement(c.b,{path:"/settings",component:vn}),r.a.createElement(c.b,{path:"/:noise",component:mn}),r.a.createElement(c.b,{exact:!0,path:"/",component:mn}))),r.a.createElement(Qn,null))}),Xn=n(56),$n=n.n(Xn);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement((function(e){var t=e.children,n=r.a.useReducer(C,B),a=Object(v.a)(n,2),o=a[0],i=a[1];return r.a.createElement(F.Provider,{value:{state:o,dispatch:i}},t)}),null,r.a.createElement(s.a,null,r.a.createElement(Zn,null)),r.a.createElement((function(e){var t=r.a.useContext(F),n=t.state,o=t.dispatch,i=Object(a.useState)(!1),s=Object(v.a)(i,2),c=s[0],l=s[1];Object(a.useEffect)((function(){var e=function(e){"`"===e.key&&l(!c)};return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}),[c]);return r.a.createElement("div",Object.assign({className:[$n.a.divDev,c?"":$n.a.hidden].join(" ")},e),r.a.createElement("div",null,r.a.createElement("b",null,"DevPanel")),r.a.createElement("div",{className:[$n.a.btnOutline,$n.a.button].join(" "),onClick:function(){var e="outliner",t=document.getElementById(e);if(t){var n;null===(n=t.parentNode)||void 0===n||n.removeChild(t)}else{var a=document.createElement("style");a.type="text/css",a.id=e,a.appendChild(document.createTextNode("* {box-shadow: 0 0 0 1px red;}")),document.head.appendChild(a)}}},"Outline"),r.a.createElement("div",{className:[$n.a.button].join(" "),onClick:function(){localStorage.setItem("state",JSON.stringify(n))}},"Save localStorage"),r.a.createElement("div",{className:[$n.a.button].join(" "),onClick:function(){var e=JSON.parse(localStorage.getItem("state")||"");e&&o({type:h.LOAD_STATE,payload:Object(g.a)({},e,{api:Object(g.a)({},e.api,{processId:null})})})}},"Load localStorage"),r.a.createElement("div",{className:$n.a.button,onClick:function(){console.log(n)}},"Console State"))}),null))),document.getElementById("root"))},4:function(e,t,n){"use strict";(function(e){n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"G",(function(){return g})),n.d(t,"t",(function(){return b})),n.d(t,"o",(function(){return _})),n.d(t,"K",(function(){return w})),n.d(t,"d",(function(){return E})),n.d(t,"p",(function(){return k})),n.d(t,"H",(function(){return x})),n.d(t,"n",(function(){return y})),n.d(t,"l",(function(){return S})),n.d(t,"B",(function(){return O})),n.d(t,"m",(function(){return N})),n.d(t,"s",(function(){return j})),n.d(t,"q",(function(){return A})),n.d(t,"r",(function(){return I})),n.d(t,"L",(function(){return B})),n.d(t,"F",(function(){return F})),n.d(t,"b",(function(){return T})),n.d(t,"A",(function(){return W})),n.d(t,"z",(function(){return L})),n.d(t,"g",(function(){return P})),n.d(t,"v",(function(){return R})),n.d(t,"D",(function(){return D})),n.d(t,"f",(function(){return H})),n.d(t,"c",(function(){return U})),n.d(t,"y",(function(){return M})),n.d(t,"k",(function(){return V})),n.d(t,"M",(function(){return z})),n.d(t,"E",(function(){return J})),n.d(t,"a",(function(){return G})),n.d(t,"x",(function(){return Y})),n.d(t,"w",(function(){return K})),n.d(t,"u",(function(){return Q})),n.d(t,"C",(function(){return Z})),n.d(t,"I",(function(){return X})),n.d(t,"J",(function(){return ee})),n.d(t,"h",(function(){return te}));var a=n(23),r=n(1),o=n(10),i=n(35),s=n.n(i),c=n(51),l=n(14),u=n(19),d=n(49),m=n(127),p=function(e){return""!==e.domain.currentOwner},f=function(e,t){return!!e.domain.users[t]},h=function(e,t){e.domain.users[t]=JSON.parse(JSON.stringify(c.b)),e.domain.users[t].address=t},v=function(e){return e.domain.currentOwner||""},g=function(e,t){e.domain.currentOwner=t},b=function e(t,n){return f(t,n)||console.warn("You called",e,"without checking if user exists via existsUser()"),t.domain.users[n]},_=function(e){var t=v(e);if(t&&f(e,t))return b(e,t)},w=function(e){e.domain.ownersHistory.push(_(e)||JSON.parse(JSON.stringify(c.b)))},E=function(e){e.domain.currentOwner=""},k=function(e){var t;return(null===(t=e.chain)||void 0===t?void 0:t.parsedHeight)||0},x=function(e,t){e.chain&&(e.chain.parsedHeight=t)},y=function(e){return e.domain.notificationAddress||""},S=function(e){var t;return(null===(t=_(e))||void 0===t?void 0:t.burnAmount)||0},O=function(e){if(!p(e))return!0;var t=_(e);return t?k(e)-t.winHeight>l.g:(console.log("isOwnerExpired: owner exists but no user with such address stored"),!0)},N=function(e,t){return f(e,t)?b(e,t).nonce:0},j=function(e){return e.status.block_time||0},A=function(e){return e.status.block_height||0},C=function(e){var t;return(null===(t=e.vout[0])||void 0===t?void 0:t.value)||0},I=function(e){var t;return(null===(t=e.vin[0])||void 0===t?void 0:t.prevout.scriptpubkey_address)||""},B=function(e,t){var n=I(t);f(e,n)||(h(e,n),console.log("new source created:",n));var a=e.domain.users[n];a.nonce=a.updateHeight,a.updateHeight=A(t)},F=function(t,n){if(W(n)){var a=I(n),r=b(t,a),i=N(t,a).toString(),c=function(e){return W(e)?e.vout[0].scriptpubkey_asm.split(" ").slice(2).join(""):""}(n),l=e.from(c,"hex"),u=t.domain.domainName+r.address+i;console.log("%cembeded data found:","color: green;",A(n),"  decryption key (w/ added spaces and pre hash): ",t.domain.domainName,r.address,i);for(var m=Object(d.a)(l,u),p=e.from(" "),f=e.from(""),h=[],v=0;v<m.length;v++){var g=m.slice(v,v+1),_=0===e.compare(p,g);if(0===v&&h.push(f),_&&h.push(f),!_){var w=h.length-1;h[w]=e.concat([h[w],g])}}console.log("array of embedded buffers (logged as utf8):",h,"\nseparated:",h.reduce((function(e,t){return"".concat(e," [").concat(t.toString("utf8"),"]")}),""));var E=[];h.forEach((function(e,t){if(t%2===1){var a=h[t-1].toString("utf8"),r="?"===a?s.a.encode(e):e.toString("utf8"),o={network:encodeURIComponent(a),address:encodeURIComponent(r),updateHeight:A(n),updateTimestamp:j(n)};E.push(o)}})),function(e,t,n){var a=b(e,t);a.forwards=[].concat(Object(o.a)(a.forwards),Object(o.a)(n))}(t,a,E),console.log("%c------------------------------------------\n","color: green;")}else console.log(A(n),": no op_return found for txid")},T=function(e){return e.vout.length>=2},W=function(e){return"OP_RETURN"===e.vout[0].scriptpubkey_asm.split(" ")[0]},L=function(e,t){return function(e){var t;return(null===(t=e.vout[1])||void 0===t?void 0:t.scriptpubkey_address)||""}(t)===y(e)},P=function(e){return function(e){var t;return(null===(t=e.vout[1])||void 0===t?void 0:t.value)||0}(e)>=l.f},R=function(e,t){return v(e)===t},D=function(e,t){return v(e)===I(t)},H=function(e){return C(e)>=l.e},U=function(e,t){return C(t)>=S(e)},M=function(e,t,n){return!!V(e,t,n)},V=function(e,t,n){var a=A(t),r=I(t),o=b(e,r).forwards,i=!0,s=!1,c=void 0;try{for(var l,u=o[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=l.value,m=d.network;if(d.updateHeight===a&&m.startsWith(n))return d}}catch(p){s=!0,c=p}finally{try{i||null==u.return||u.return()}finally{if(s)throw c}}},z=function(e,t){var n=y(e);t.vin.forEach((function(t){if(t.prevout.scriptpubkey_address===n){var a=t.txid,r=t.vout,o=e.domain.derivedUtxoList.findIndex((function(e){return e.txid===a&&e.vout===r}));e.domain.derivedUtxoList.splice(o,1)}})),t.vout.forEach((function(a,r){a.scriptpubkey_address===n&&e.domain.derivedUtxoList.push({txid:t.txid,vout:r,status:t.status,value:a.value,from_scriptpubkey_address:I(t)})}))},J=function(e,t){var n=I(t),a=A(t),r=!0,o=!1,i=void 0;try{for(var s,c=e.domain.derivedUtxoList[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value,u=l.from_scriptpubkey_address,d=l.status.block_height<a;if(!u&&console.log("st.domain.derivedUtxoList for some reason has undefined from_scriptpubkey_address"),u===n&&d)return!1}}catch(m){o=!0,i=m}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return!0},q=function(e){e.domain.bidding=Object(r.a)({},JSON.parse(JSON.stringify(c.a.domain.bidding)))},G=function(e,t,n){var a=I(t),r=A(t),o=C(t);r>e.domain.bidding.endHeight&&function(e,t,n){var a=A(t);q(e),e.domain.bidding.startHeight=a,e.domain.bidding.endHeight=a+l.c,e.domain.bidding.type=n,console.log("Bidding period started at height",a,"until",a+l.c)}(e,t,n);var i=e.domain.bidding.bids,s={height:r,timestamp:j(t),address:a,value:o,valueLeftToRefund:o,blockHash:t.status.block_hash};i.push(s),console.log("addBid(): New bid from",a,"for",o)},Y=function(e){var t=e.chain.parsedHeight,n=e.domain.bidding.type,a=e.domain.bidding.endHeight;return n!==u.b.NULL&&a<=t},K=function(e){if(!e.chain)throw new Error("called st.chain without it defined");var t=e.chain.parsedHeight,n=e.domain.bidding.type,a=e.domain.bidding.endHeight,r=e.domain.bidding.startHeight;return n!==u.b.NULL&&t<a&&t>=r&&(console.log("",t,"Action falls within bidding period."),!0)},Q=function(e,t){if(!K)return!1;for(var n=0;n<e.domain.bidding.bids.length;n++){if(e.domain.bidding.bids[n].address===t)return!0}return!1},Z=function(e,t){var n=I(t);return Q(e,n)},X=function(e,t){var n=I(t),a=e.domain.bidding.bids,r={},o=!0,i=!1,s=void 0;try{for(var c,l=t.vout[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value,d=u.scriptpubkey_address,m=u.value;void 0!==d&&n!==d&&(r[d]?r[d]+=m:r[d]=m)}}catch(g){i=!0,s=g}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}for(var p=0;p<a.length;p++){var f=a[p],h=f.address;if(console.assert(f.height>=e.domain.bidding.startHeight,"Bid height outside allowed range."),console.assert(f.height<e.domain.bidding.endHeight,"Bid height outside allowed range."),void 0!==r[h]){var v=Math.max(Math.min(r[h],f.valueLeftToRefund),0);f.valueLeftToRefund-=v,r[h]-=v,console.log("Height ".concat(A(t),": ").concat(n," refunded ").concat(v," to ").concat(h," leaving ").concat(f.valueLeftToRefund," to be refunded"))}}},$=function(e){return e.domain.bidding.bids.filter((function(e){return e.valueLeftToRefund>0}))},ee=function(e){return $(e).reduce((function(e,t){var n=t.address,o=t.valueLeftToRefund;return e[n]?Object(r.a)({},e,Object(a.a)({},n,e[n]+o)):Object(r.a)({},e,Object(a.a)({},n,o))}),{})},te=function(e){var t=e.domain.bidding.bids,n=$(e),a=[],r=!0,o=!1,i=void 0;try{for(var s,c=function(){var t=s.value;console.assert(t.height>=e.domain.bidding.startHeight,"Bid height outside allowed range."),console.assert(t.height<e.domain.bidding.endHeight,"Bid height outside allowed range.");var r=t.height;n.some((function(e){return!(e.height>=r)&&e.address!==t.address}))?console.log("endBidding: at height ".concat(r,", this bid failed to refund"),t):(a.push(t),console.log("endBidding: at height ".concat(r,", this bid fully refunded previous and counts"),t))},u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)c()}catch(E){o=!0,i=E}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}for(var d={address:"",height:0,timestamp:0,value:0,valueLeftToRefund:0,blockHash:""},p=[],f=0,h=a.length-1,v=0;v<=h;v++){var b=a[v],w=b.height;b.height>f&&(d=Object(m.a)(p)||d,p=[]),b.value>=l.b*d.value&&p.push(b),f=w,v===h&&(d=Object(m.a)(p)||d)}if(""===d.address)throw new Error("There should be no cases without a winner since at least 1st bid wins");g(e,d.address),_(e).burnAmount=d.value,_(e).winHeight=d.height,_(e).winTimestamp=d.timestamp,console.log("",d.height,"Bidding winner and new owner is",d.address),q(e)}}).call(this,n(3).Buffer)},41:function(e,t,n){e.exports={wrapper:"InputForm_wrapper__3RO9S",shiftRight:"InputForm_shiftRight__16j42",label:"InputForm_label__2VQbz",textarea:"InputForm_textarea__3jY9y",button:"InputForm_button__1gilQ",bonusInformation:"InputForm_bonusInformation__J6QjS",invisible:"InputForm_invisible__1fPsX",suggestions:"InputForm_suggestions__gSVA1",suggestions__item:"InputForm_suggestions__item__LcFcw",suggestions__separator:"InputForm_suggestions__separator__3DV7k"}},46:function(e,t,n){e.exports={lblMainTitle:"HomeContent_lblMainTitle__1LqCG",results:"HomeContent_results__3QLFo",divSearch:"HomeContent_divSearch__3dKw5",txtSearch:"HomeContent_txtSearch__3HpSp",lblMainTitleAfter:"HomeContent_lblMainTitleAfter__J9CsB",divSearchAfter:"HomeContent_divSearchAfter__2MAMf",wrapper:"HomeContent_wrapper__mPINc"}},49:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s}));var a=n(11),r=n.n(a),o=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,o=r.a.createHash("sha256").update(n).digest(),i=r.a.createHash("sha256").update(a).digest().slice(0,16),s=r.a.createCipheriv("aes-256-ctr",o,i),c=s.update(e.from(t));return c=e.concat([c,s.final()])},i=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,o=r.a.createHash("sha256").update(n).digest(),i=r.a.createHash("sha256").update(a).digest().slice(0,16),s=r.a.createCipheriv("aes-256-ctr",o,i),c=s.update(t);return c=e.concat([c,s.final()])},s=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,o=r.a.createHash("sha256").update(n).digest(),i=r.a.createHash("sha256").update(a).digest().slice(0,16),s=r.a.createDecipheriv("aes-256-ctr",o,i),c=s.update(t);return c=e.concat([c,s.final()])}}).call(this,n(3).Buffer)},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a={domain:{domainName:"",notificationAddress:"",txHistory:[],derivedUtxoList:[],utxoList:[],users:{},currentOwner:"",bidding:{startHeight:0,endHeight:0,type:n(19).b.NULL,bids:[]},ownersHistory:[]},chain:{parsedHeight:0,currentHeight:0}},r={address:"",forwards:[],burnAmount:0,winHeight:0,winTimestamp:0,nonce:0,updateHeight:0}},53:function(e,t,n){e.exports={bar:"CreateHeader_bar__27ge1",domain:"CreateHeader_domain__1TQ7L",alias:"CreateHeader_alias__1dNdj",ext:"CreateHeader_ext__17sc6",cutOverflow:"CreateHeader_cutOverflow__3s_72",spacer:"CreateHeader_spacer__3tstm",wrapper:"CreateHeader_wrapper__3cPTN"}},54:function(e,t,n){e.exports={fees:"FeesSelection_fees__2ZlKp",fees__rate:"FeesSelection_fees__rate__3lHbu",fees__apicall:"FeesSelection_fees__apicall__2ham0",fees__feeSelection:"FeesSelection_fees__feeSelection__Emkyk",fees__feeSelection__choice:"FeesSelection_fees__feeSelection__choice__hZc8T"}},55:function(e,t,n){e.exports={outershell2:"Logo_outershell2__ojy1V",btcLogo:"Logo_btcLogo__367Q4",cutoffs:"Logo_cutoffs__XLLfg",background:"Logo_background__3SgWH",theB:"Logo_theB__2iXnu"}},56:function(e,t,n){e.exports={divDev:"DevPanel_divDev__2q66m",hidden:"DevPanel_hidden__Wlj3v",btnOutline:"DevPanel_btnOutline__2FJLx",button:"DevPanel_button__1DKHt"}},64:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(8),r=n(72),o=n.n(r),i=n(50),s=n.n(i),c=function(e){var t=a.networks[e],n=o.a.generateMnemonic(),r=o.a.mnemonicToSeed(n),i=a.bip32.fromSeed(r,t).derivePath("m/44'/0'/0'").derivePath("0/0").toWIF(),s=a.ECPair.fromWIF(i,t);return{mnemonic:n,WIF:i,address:a.payments.p2wpkh({pubkey:s.publicKey,network:t}).address}},l=function(e,t){var n=a.networks[t],r=o.a.mnemonicToSeed(e),i=a.bip32.fromSeed(r,n).derivePath("m/44'/0'/0'").derivePath("0/0").toWIF(),s=a.ECPair.fromWIF(i,n);return{mnemonic:e,WIF:i,address:a.payments.p2wpkh({pubkey:s.publicKey,network:n}).address}};function u(e){return(null===e||void 0===e?void 0:e.reduce((function(e,t){return e+t.value}),0))||0}var d=function(t){var n=t.inputScript,r=t.network;return function(t,o,i,c,l,u){var d={network:r,output:i,input:n};return u&&c&&(d=a.payments.p2wsh({network:r,redeem:d})),l&&(d=a.payments.p2sh({network:r,redeem:d})),{finalScriptSig:d.input,finalScriptWitness:d.witness&&d.witness.length>0?function(t){var n,a=e.allocUnsafe(0);function r(t){var n=a.length,r=s.a.encodingLength(t);a=e.concat([a,e.allocUnsafe(r)]),s.a.encode(t,a,n)}function o(t){r(t.length),function(t){a=e.concat([a,e.from(t)])}(t)}return r((n=t).length),n.forEach(o),a}(d.witness):void 0}}}}).call(this,n(3).Buffer)},67:function(e,t,n){e.exports={wrapper:"Details_wrapper__32nmX",buttonWrapper:"Details_buttonWrapper__12FS5",toggleDetails:"Details_toggleDetails__2jgtb",arrow:"Details_arrow__2N1IF",down:"Details_down__2irBp",details:"Details_details__1lwEd"}},68:function(e,t,n){e.exports={wrapper:"Switch_wrapper__13KFe",shiftRight:"Switch_shiftRight__1BAPW",label:"Switch_label__ZC9Fh",choiceArea:"Switch_choiceArea__2lIss",choice:"Switch_choice__HlPt4",selected:"Switch_selected__ynsKV"}},71:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var a=n(8),r=a.opcodes,o=a.crypto.hash160,i=function(t,n){var i=a.networks[n],s=e.from(t,"utf8"),c=a.script.compile([o(s),r.OP_DROP]);return{notificationsAddress:a.payments.p2wsh({redeem:{output:c,network:i},network:i}).address}}}).call(this,n(3).Buffer)},80:function(e,t,n){e.exports={wrapper:"AboutContent_wrapper__1kfnm",title:"AboutContent_title__16tUj",contentWrapper:"AboutContent_contentWrapper__2XHS2",drawing:"AboutContent_drawing__1qDTH"}},92:function(e,t,n){e.exports={wrapper:"CreateNavigator_wrapper__24rTe",scroller:"CreateNavigator_scroller__2q-0N",horizontalScaler:"CreateNavigator_horizontalScaler__2qmoi"}},93:function(e,t,n){e.exports={wrapper:"SettingsContent_wrapper__g7M-C",contentWrapper:"SettingsContent_contentWrapper__1f-dq",title:"SettingsContent_title__17SgK"}},94:function(e,t,n){e.exports={wrapper:"VisualAPI_wrapper__1qx_c",spinner:"VisualAPI_spinner__2fYAt"}},95:function(e,t,n){e.exports={spinner:"Spinner_spinner__3itsP",block:"Spinner_block__1wS0M",moveit:"Spinner_moveit__3lwkE",chain:"Spinner_chain__-Farp"}}},[[194,1,2]]]);
//# sourceMappingURL=main.1f6ac068.chunk.js.map